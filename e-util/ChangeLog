2004-12-06  Not Zed  <NotZed@Ximian.com>

	* e-config.c (ec_rebuild): set the table spacings to 6 for
	generated tables.

2004-11-22  Not Zed  <NotZed@Ximian.com>

	* e-config.c (ec_rebuild): if the table existed before and we have
	no factory, destroy it always.

2004-12-03  Not Zed  <NotZed@Ximian.com>

	* e-config.c (ec_rebuild): revert the patch from chenthill, this
	wont work yet.

2004-11-29  Mengjie Yu  <meng-jie.yu@sun.com>

	* e-config.c: (ec_rebuild):add mnemonic for label.
	* e-passwords.c: (ep_ask_password):add description for password dialog.

2004-11-26  JP Rosevear  <jpr@novell.com>

	* e-gui-utils.c (e_create_image_widget): get the image directly
	from the icon factory

	* e-config.c: insert debug defines so we can
	turn spew on and off

	* e-event.c: insert debug defines so we can turn spew on and off	

	* e-menu.c: insert debug defines so we can turn spew on and off		
	
	* e-plugin.c: insert debug defines and set to off for now

	* e-popup.c: insert debug defines so we can turn spew on and off
	(e_popup_create_menu): get the image directly from the icon
	factory

2004-11-26  JP Rosevear  <jpr@novell.com>
	
	* e-icon-factory.h: add proto

	* e-icon-factory.c (e_icon_factory_init): cast to kill warning
	(e_icon_factory_get_image): new function to return a GtkImage
	widget give an icon name and size

2004-11-25  Chenthill Palanisamy <pchenthill@novell.com>

	* e-config.c (ec_rebuild): Set the row and column spacings as
	tweleve while creating the table to make it HIG compliant.
       	
2004-11-19  Not Zed  <NotZed@Ximian.com>

	* e-plugin.c (ep_load): if the plugin fails to load just disable
	it, don't unref it (it may be referenced elsewhere).

2004-11-18  Not Zed  <NotZed@Ximian.com>

	* e-plugin.c (epl_loadmodule): split out module loadng code.
	(epl_construct): if we're enabled, and load-on-startup is set,
	load the module right away.  Not to be abused!

2004-11-16  Not Zed  <NotZed@Ximian.com>

	* e-host-utils.[ch]: removed, code moved into
	camel-net-utils.[ch].

2004-11-15  Not Zed  <NotZed@Ximian.com>

	* e-trie.[ch], e-memory.[ch], e-sexp.[ch], e-msgport.[ch]: Moved
	to eds/libedataserver.

	* e-path.[ch]: removed & deleted.

2004-11-03  Not Zed  <NotZed@Ximian.com>

	* e-plugin.c (e_plugin_list_plugins): added helper api to list all
	plugins.
	(ep_construct): load authors into new list for them.
	(e_plugin_register_type): setup disabled list.
	(ep_construct): dont load the hooks if we're not enabled.
	(e_plugin_enable): make this a virutal method.
	(e_plugin_invoke): if we're disabled, noop.

2004-11-01  Not Zed  <NotZed@Ximian.com>

	** See bug #68787

	* e-account.c (xml_set_content): check the new val isn't null
	before dereferencing it.
	* e-account.c (xml_set_prop): same here.

2004-10-28  Not Zed  <NotZed@Ximian.com>

	* e-config.c (ec_rebuild): revert the last change.

2004-10-28  Not Zed  <NotZed@Ximian.com>

	* e-config.c (ec_rebuild): set the default row/col spacings of the
	table.

2004-10-20  Not Zed  <NotZed@Ximian.com>

	* e-config.c (ec_rebuild): check for empty trailing sections/pages
	after we exit the main loop.

	* e-plugin.c (e_plugin_get_type): make ~/.eplugins the default
	eplugin location, not ~/.eplug.

2004-10-18  Not Zed  <NotZed@Ximian.com>

	* e-config.h: fix some forward decls.

2004-10-19  JP Rosevear  <jpr@novell.com>

	* e-config.c, e-event.c, e-menu.c, e-plugin.c, e-plugin.h,
	e-popup.c: convert to org.gnome hook names

2004-10-07  Jeffrey Stedfast  <fejj@novell.com>

	* e-passwords.c (ep_ask_password): Use "%s" as the formatter
	argument and msg->prompt as a printf-style argument rather than
	using it as the format string. Fixes bug #67622.

2004-10-12  Not Zed  <NotZed@Ximian.com>

	* e-config.c (ech_check, ech_config_factory, emph_construct_menu):
	setup a "check" handler, page-check/validation callback.

	* e-popup.c (e_popup_new): new method to create a targetless popup
	menu.

2004-10-08  JP Rosevear  <jpr@novell.com>

	* e-plugin.c (ep_load): fix typo

2004-10-08  Not Zed  <NotZed@Ximian.com>

	* e-plugin.c (ep_load): handle wrong root element properly.  From
	David Trowbridge <David.Trowbridge@Colorado.edu>

2004-10-07  Not Zed  <NotZed@Ximian.com>

	* e-plugin.h: Fix the function pointer types!

	* e-plugin.c (epl_invoke): noop if we're disabled, and do some
	lifecycle stuff now, call e_plugin_lib_enable on the module if it
	exists.

2004-10-07  Not Zed  <NotZed@Ximian.com>

	* e-config.c (ec_rebuild): show the toplevel notebook if we
	had to create one, always.

	* e-menu.c (e_menu_add_items): initialise node->menu properly.

	* e-plugin.c (ep_load): read/initialise a unique id for all
	plugins and track them in a hashtable.
	(ep_construct): refactor so we have more control over what
	happens.  if the hook handling class isn't registered yet, just
	note it and keep going.
	(e_plugin_hook_new): remove this, its handled internally by above.

2004-10-06  Not Zed  <NotZed@Ximian.com>

	* e-popup.c (e_popup_create_menu): only take one mask parameter,
	and implement EPopupItem->enable to do what the other mask did.
	(ep_activate): if this is a toggle or radiobutton, set the active
	state on the item->type.
	(e_popup_create_menu): if a menu image starts with gtk-, then
	assume it is a gtk stock image instead.

2004-08-27  Not Zed  <NotZed@Ximian.com>

	* e-passwords.c (e_passwords_ask_password): return cancelled if
	we're in an offline state.

2004-08-26  Rodrigo Moya <rodrigo@novell.com>

	* eggtrayicon.[ch]: updated from libegg.

2004-08-20  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* e-dialog-utils.c: (e_notice):
	* e-passwords.c: (ep_ask_password):
	Don't call gtk_dialog_set_has_separator on Gtk Message Dialog 
	with GTK+ >= 2.4.0.

2004-08-13  Rodrigo Moya <rodrigo@novell.com>

	* e-categories-config.c: include gtkdialog.h rather than gnome-dialog.h.

2004-08-12  Carlos Garnacho Parro  <carlosg@gnome.org>

	* e-dialog-utils.c: Optionally use GtkFileChooser if compiled
	against Gtk+ >= 2.4.0

2004-08-10  Not Zed  <NotZed@Ximian.com>

	** See bug #61840, and others.

	* e-passwords.c: Lots of changes.  The api is now fully
	multi-thread safe, all calls are serialised internally, even
	recursive main-loop calls.  Small api changes to the
	ask_password call to add some new features required by the mailer
	and to clean up some of the names.
	(e_passwords_cancel): new procedure to cancel any outstanding
	password requests, for when we need to go uninteractive.

2004-08-09  Rodney Dawes  <dobey@novell.com>

	* e-icon-factory.c (icon_foreach_remove): We must return TRUE here
	so that things actually get removed from the list

2004-08-05  Rodrigo Moya <rodrigo@novell.com>

	* e-icon-factory.c (e_icon_factory_init): connect to "changed"
	signal on the GnomeIconTheme object.
	(icon_theme_changed_cb): g_hash_table_foreach_remove all items in the
	hash table.
	(icon_foreach_remove): callback for removing hash table items.

2004-08-05  Rodrigo Moya <rodrigo@novell.com>

	Fixes #62030

	* e-icon-factory.c (load_icon): get the icon_key as a new argument
	and use that in the call to icon_new().
	(e_icon_factory_get_icon): pass icon_key to load_icon().
	(e_icon_factory_get_icon_list): ditto.

2004-08-01  JP Rosevear  <jpr@novell.com>

	* e-pilot-util.c (e_pilot_get_sync_source): find the source with
	the pilot-sync property
	(e_pilot_set_sync_source): give the source the pilot-sync property
	and make sure its the only one

	* e-pilot-util.h: add prototypes

	* Makefile.am (eutilincludedir): don't build pilot settings

2004-07-20  Not Zed  <NotZed@Ximian.com>

	* e-dialog-utils.c: include config.h.  See #61395.

2004-07-12  Dan Winship  <danw@novell.com>

	* e-mktemp.c (e_mktemp, e_mkdtemp): un-const the return values,
	since they need to be freed
	(d): turn off debugging
	(expire_dir_rec): remove debug printfs

2004-08-24  JP Rosevear  <jpr@novell.com>

	* Makefile.am: define EVOLUTION_PLUGINDIR

	* e-plugin.c (e_plugin_get_type): add both a global and user
	specifc eplug path as defaults
	(e_plugin_load_plugins): just skip a directory if it can't be
	opened

2004-09-10  Not Zed  <NotZed@Ximian.com>

	* e-popup.c (emph_construct_menu): duh, setup the hook pointer.

	* e-menu.c (e_menu_add_items): pass pixmaps and ui files to this
	function now.
	(e_menu_add_pixmap): removed, covered by above.
	(e_menu_add_ui): removed, covered by above.
	(emph_construct_menu): setup the hook pointer properly.

	* e-menu.h: moved the pixmap and ui file structures to be public,
	removed hte hook equivalents.

2004-09-09  Not Zed  <NotZed@Ximian.com>

	* e-event.c (e_event_remove_items): implement a remove function.
	(e_event_add_items): return a handle to pass to above.
	(emph_event_handle): noop if we're disabled.

	* e-popup.c (emph_popup_factory): noop if the
	plugin is disabled.

	* e-plugin.c (ep_init): setup an enabled bit for the plugin.
	Preliminary work on being able to manage plugins.
	(e_plugin_hook_enable): set hook enable state.
	(e_plugin_enable): set plugin enable state.

2004-09-07  Not Zed  <NotZed@Ximian.com>

	* e-config.c (ec_rebuild): pass the right old widget to the page
	factory.
	(ec_widget_destroy): unref the config and the target when done.
	(e_config_create_widget): force the notebook to page 0, workaround
	some other bug i don't understand.
	(e_config_create_window): set dialog hint on druid.

2004-09-06  Not Zed  <NotZed@Ximian.com>

	* e-account.c (e_account_import): emit a changed event on the dest.
	(e_account_set_from_xml): emit a changed event if we were.

	* e-config.c (ec_rebuild): add a table item for some type-safety.
	remove/alter the asserts so the code attemps to fail gracefully
	rather than just fail.

2004-09-01  Not Zed  <NotZed@Ximian.com>

	* e-menu.[ch]:
	* e-popup.[ch]:
	* e-config.[ch]:
	* e-event.[ch]: API syncrhonisation.  Item callbacks now get the
	root object, the item, and user-supplied data.  Removed
	now-redundant data and structures. Documentation updates.

2004-08-30  Not Zed  <NotZed@Ximian.com>

	* e-popup.c (emph_construct_item): just build a popupitem
	directly, use user_data to pass the activate method name.

	* e-popup.h: removed epopuphookitem.

	* e-popup.c (emph_construct_item): dont set hook on hookitem
	anymore, dont need to set user_data either.

	* e-popup.h: no longer pass parent pointer in EPopupHookItem, its
	handled by add_items's data now.

	* e-popup.c (ep_finalise): re-arrange and call freefunc with the
	new args.
	(e_popup_create_menu): change the activate data so we can pass the
	new api arguments.
	(ep_activate): changes for api changes.
	(emph_popup_factory): no longer takes target arg, taken from the
	popup, pass the popuphook to the add_items call.
	(emph_popup_activate): changed for new argument types.

	* e-popup.h: removed popup from epopupitem.

	* e-popup.c (e_popup_add_static_items): make private/rename to
	ep_add_static_items.
	(ep_add_static_items): dont pass target, it is set on the epopup
	structure.
	(e_popup_add_items): change the freefunc to be an EPopupItemsFunc
	and add a user-data field, and track the parent epopup.

	* e-popup.h: change the activatefunc to pass the target and data
	supplied to add_items.

2004-08-25  Not Zed  <NotZed@Ximian.com>

	* e-config.c (e_config_new): removed, this shouldn't be here for
	an abstract class.
	(*): Added doco.

2004-08-24  Not Zed  <NotZed@Ximian.com>

	* e-config.c (emph_construct_item): translate the label text.

	* e-popup.c (emph_construct_item): translate the label text.

	* e-plugin.c (e_plugin_xml_prop_domain): helper to get a property
	translated.
	(ep_construct): translate the name and description based on the
	new domain tag.  get the description as tag content not property.
	(e_plugin_xml_content_domain): similar for xml node content.

2004-08-24  Not Zed  <NotZed@Ximian.com>

	* e-account.c (init): setup some defaults for the account.

	* e-config.c (e_config_create_widget): remove target arg actually.
	(ec_rebuild): add druid page start/end pages.  fixes.
	(ec_druid_finish, ec_druid_cancel): handle finishing the druid.

2004-08-23  Not Zed  <NotZed@Ximian.com>

	* e-config.c (ec_druid_prepare, ec_druid_prev, ec_druid_next):
	handle druid navigation.

2004-08-20  Not Zed  <NotZed@Ximian.com>

	* e-config.c (e_config_target_changed): add 'how' changed arg.
	(e_config_create_widget): dont take target anymore, set that
	separately.
	(e_config_set_target): new virtual method to set the target.
	(ec_set_target): implementation.

2004-08-19  Not Zed  <NotZed@Ximian.com>

	* e-account.c (e_account_set_bool): only emit changed if it did.

2004-08-17  Not Zed  <NotZed@Ximian.com>

	* e-config.c (e_config_page_check): fix a past-o.
	(e_config_target_changed): treat the returned page for a druid
	page factory as a gnomedruidpagestandard, so get_page works, etc.

2004-08-16  Not Zed  <NotZed@Ximian.com>

	* e-event.[ch]: Added event hook and dispatch router.

2004-08-13  Not Zed  <NotZed@Ximian.com>

	* e-plugin.c (e_plugin_load_plugins): don't take a path, load all
	paths set.
	(e_plugin_add_load_path): add a load path to the search path.
	(e_plugin_get_type): setup the initial load path from environment
	or defaults.
	(e_plugin_xml_int): helper to get a prop in int format.

2004-08-11  Not Zed  <NotZed@Ximian.com>

	* e-config.c (e_config_target_changed): handle DRUID root type.

2004-08-05  Not Zed  <NotZed@Ximian.com>

	* e-account.c (class_init): add a changed signal.
	(e_account_set_string, e_account_set_int, e_account_set_bool):
	emit changed signal if it did.

	* e-config.c (e_config_add_page_check): add a page verification
	function.  It will be called for the given page, or all pages, to
	verify the page contains valid data.

2004-07-29  Not Zed  <NotZed@Ximian.com>

	* e-account.c (e_account_get_string, e_account_get_int) 
	(e_account_get_bool, e_account_set_string, e_account_set_int) 
	(e_account_set_bool): implement.  completely table driven.

2004-07-02  Chris Toshok  <toshok@ximian.com>

	[ fixes #60691 ]
	
	* e-iterator.h: rename the "delete" member to
	"remove", to fix c++ build.

	* e-iterator.c (e_iterator_delete): same.
	(e_iterator_class_init): same.

	* e-list-iterator.c (e_list_iterator_class_init): same.
	(e_list_iterator_remove): same.

2004-06-03  Dan Winship  <danw@novell.com>

	* e-icon-factory.c (load_icon): If the icon_name is an abolute
	path, just load it.
	(e_icon_factory_get_icon): Update the docs to reflect that

2004-06-01  Not Zed  <NotZed@Ximian.com>

	* e-fsutils.c (e_fsutils_avail): use statvfs if available.  Should
	make it actually work, if not portable.  This is for a bug but I
	can't recall the number.

2004-05-27  Rodney Dawes  <dobey@novell.com>

	* Makefile.am (dist-hook): Require e-error-tool

2004-05-19  Jeffrey Stedfast  <fejj@novell.com>

	* e-icon-factory.c: Lots of re-working action. We no longer load a
	pixbuf for each and every available size when requesting the icon
	for the first time, instead we simply load the requested icon of
	the requested size and cache only that.
	(e_icon_factory_get_icon): Always return a broken image icon if we
	fail to load the requested icon.
	(e_icon_factory_get_icon_list): Only bother with adding icons of
	the sizes that are suggested by ghe gtk documentation for
	gtk_window_set_icon_list rather than the sizes of the standard
	icons (since it isn't the same list of sizes).
	(load_icon): Fall back to EVOLUTION_ICONSDIR/WWxHH/icon_name if
	the icon-theme lookup fails. Also now takes a 'scale' argument
	which, if non-zero, allows us to look for images of the same name
	with a larger size in order to scale them back down to what we
	need.

2004-05-19  Jeffrey Stedfast  <fejj@novell.com>

	* e-gui-utils.c (e_icon_for_mime_type): We always have
	GnomeIconTheme nowadays, get rid of the old unused code.
	(e_create_image_widget): Use E_ICON_SIZE_DIALOG

2004-05-17  Jeffrey Stedfast  <fejj@novell.com>

	* e-icon-factory.h (E_ICON_SIZE_LIST/STATUS): New #define aliases
	for common icon usage cases where it may not be obvious that they
	are the same size as menu icons.

2004-05-12  Jeffrey Stedfast  <fejj@novell.com>

	* e-icon-factory.c (e_icon_factory_shutdown): New function to
	clean up the cached icons.

2004-05-12  Not Zed  <NotZed@Ximian.com>

	* e-error-tool.c: Tool to do i18n string extraction for error xml
	files.

2004-05-10  Not Zed  <NotZed@Ximian.com>

	* e-fsutils.c (e_fsutils_usage): new file/function, get disk usage
	of a path, in 1024 byte blocks.
	(e_fsutils_avail): new file/function, get disk space available for
	a given path, in 1024 byte blocks.

	* e-meta.[ch]: Removed.  Poor idea badly executed, and no longer used.

	* e-path.h: add a fixme about deprecation.

2004-04-30  Not Zed  <NotZed@Ximian.com>

	* e-lang-utils.[ch]: Removed.  This is covered by
	gnome_i18n_get_language_list, which is more complete.

2004-04-30  Dan Winship  <danw@ximian.com>

	* e-icon-factory.c (load_icon): Make this work for non-stock icons
	too.

2004-04-22  Not Zed  <NotZed@Ximian.com>

	* e-icon-factory.c (e_icon_factory_get_icon_list): make sure we
	unlock if we fail to find an icon.

2004-04-21  Jeffrey Stedfast  <fejj@ximian.com>

	* e-icon-factory.c: Remove the warnings about using E_ICON_SIZE
	enums.

2004-04-20  Jeffrey Stedfast  <fejj@ximian.com>

	* e-icon-factory.c (e_icon_factory_get_icon): Make
	thread-safe. Fixes a crash I encountered this morning.
	(e_icon_factory_get_icon_filename): Same.
	(e_icon_factory_get_icon_list): Here too.

2004-04-19  Jeffrey Stedfast  <fejj@ximian.com>

	* e-icon-factory.h: Add an enum for icon sizes (temporarily has
	absolute pixel sizes assigned to it until I commit
	e-icon-factory.c changes - but only after all other code has been
	updated to use the enums).

2004-04-16  Michael Terry  <mike@mterry.name>

	* Makefile.am: Add e-icon-factory.[ch]
	* e-gui-utils.c: Use the icon theme via EIconFactory
	* e-icon-factory.[ch]: Move EIconFactory to e-util, and add icon theme
	support to the object so evolution uses them

2004-04-13  Jeffrey Stedfast  <fejj@ximian.com>

	* e-signature-list.c (gconf_signatures_changed): Don't add an
	autogen signature if the new signature is the autogen signature.

2004-04-13  Jeffrey Stedfast  <fejj@ximian.com>

	* e-host-utils.c (e_gethostbyname_r): Implemented a similar
	workaround to the one I did for a gethostbyaddr_r() glibc bug
	here. Glibc will apparently return success for addresses such as
	"192..168.1.1" (note the double dot) and yet not have filled in
	the hostent properly.

2004-04-12  Jeffrey Stedfast  <fejj@ximian.com>

	Really fixes bug #56623

	* e-signature-list.c (gconf_signatures_changed): If we've had to
	"fix" any signatures by adding a uid, set the resave state on the
	list (only cared about if this is at initial load time).
	(e_signature_list_construct): If we've set any uids in
	signatures_changed(), then save the signature list back out.

2004-04-09  Jeffrey Stedfast  <fejj@ximian.com>

	* e-account.c (xml_set_identity): If we fail to set a sig_uid then
	try to extract the old style signature id and assume the migration
	code will fix us up (if not, nothing bad will happen anyway).

	* e-signature-list.c (gconf_signatures_changed): If the autogen
	signature isn't in the list (or isn't the first in the list), add
	it to the head of the list.

2004-04-07  Jeffrey Stedfast  <fejj@ximian.com>

	Probably fixes bug #56623 and others?

	* e-signature-list.c (gconf_signatures_changed): Fixed to not use
	free'd iter memory. Also reverse the new_sigs list before adding
	them to the signature list (so they are in the same order they
	appeared in the gconf key).

2004-04-05  Jeffrey Stedfast  <fejj@ximian.com>

	* e-signature-list.c (gconf_signatures_changed): Fixed to not
	ignore signatures without uids (e.g. signatures that were from
	prior versions).

2004-04-02  Jeffrey Stedfast  <fejj@ximian.com>

	* e-signature.c (e_signature_to_xml): Always set a format prop so
	that 1.4 and older 1.5 versions won't strcmp() on a NULL value.

2004-04-01  Jeffrey Stedfast  <fejj@ximian.com>

	* e-account.c: Reference signatures by their UID rather than by an
	integer id. Also removed the need to have 2 signature settings (no
	need for the "auto" signature boolean anymore).

2004-03-31  Jeffrey Stedfast  <fejj@ximian.com>

	* e-signature.[c,h]: New class similar to EAccount but for
	signatures.

	* e-signature-list.[c,h]: New class similar to EAccountList only
	for signatures.

2004-03-31  Not Zed  <NotZed@Ximian.com>

	* e-account-list.h: similar to below.

	* e-account.h: define struct _EAccount* so you can properly forward
	declare it.

2004-03-18  Not Zed  <NotZed@Ximian.com>

	* e-account.c: Added options for transport_url and source_url
	permissions.

2004-03-18  Not Zed  <NotZed@Ximian.com>

	* e-account.c (e_account_writable, e_account_writable_option):
	added interface to find out if various fields or server options
	are writable.  to work around gconf limitations.

2004-03-04  William Jon McCann  <mccann@jhu.edu>

	* e-dialog-utils.c (e_notice, e_notice_with_xid, save_ok): 
	* e-request.c (e_request_string): 
	* e-passwords.c (e_passwords_ask_password):
	Remove separator from dialogs per HIG.

2004-03-04  Not Zed  <NotZed@Ximian.com>

	* e-sexp.c: Added some debug stuff.

2004-02-27  Not Zed  <NotZed@Ximian.com>

	** See Bug #37329.

	* e-mktemp.c (get_dir): setup a comjpile time option for storing
	in the homedir, and also just use the uid as the key for a /tmp
	dir option.
	(e_mktemp_cleanup): removed entirely.
	(e_mkstemp, e_mkdtemp, e_mktemp): dont save the file/dirname in a
	list anymore.
	(expire_dir_rec): expire old temp data from previous runs/old data
	lying around.  Based on access time.
	(get_dir): run an expirey every now and then.

2004-02-25  Jeffrey Stedfast  <fejj@ximian.com>

	* e-gui-utils.c (e_icon_for_mime_type): Protect against feeding
	gdk_pixbuf_new_from_file() a NULL path. Clears up some console
	warning spewage.

2004-02-19  Not Zed  <NotZed@Ximian.com>

	* e-pilot-util.c: include string.h, fixes 64 bit crash.  From
	David Mosberger.

2004-02-03  Chris Toshok  <toshok@ximian.com>

	* e-html-utils.c (e_text_to_html_full): add callto:, h323:, and
	webcal: schemes.

2004-01-26  JP Rosevear <jpr@ximian.com>

	* e-folder-map.c (e_folder_map_dir): use g_file_test instead of
	stat and pass the type e_folder_map_dir when recursing

2004-01-24  JP Rosevear <jpr@ximian.com>

	* e-folder-map.c: turn off debugging

2004-01-24  Chris Toshok  <toshok@ximian.com>

	* e-folder-map.c (e_folder_map_dir): use GDir/g_build_filename,
	and g_file_test.
	(e_folder_map_local_folders): same.

2004-01-23  JP Rosevear <jpr@ximian.com>

	* Makefile.am: build new sources

	* e-folder-map.[hc]: builds a list of 1.4 folder paths of a
	certain type

2004-01-20  JP Rosevear <jpr@ximian.com>

	* Makefile.am: don't build dead files

	* e-xml-hash-utils.[hc]: kill, these were moved to e-d-s long ago

2004-01-14  Jeffrey Stedfast  <fejj@ximian.com>

	* e-bconf-map.[c,h]: New source files for mapping bonobo-conf keys
	to gconf keys. Moved out of shell/e-config-upgrade.c

2004-01-13  Not Zed  <NotZed@Ximian.com>

	* e-msgport.c (em_cache*): A time-based thread-safe in-memory
	cache thing.  Called em_cache 'cause there's an e_cache in gal.

2004-01-05  Not Zed  <NotZed@Ximian.com>

	* e-memory.c (e_mempool_destroy): Fix from Zan Lynx
	<zlynx@acm.org> to lock the memchunk before freeing the pool
	header.

2003-12-06  JP Rosevear <jpr@ximian.com>

	* Makefile.am: Remove hard coded disable deprecated flags

2003-11-23  JP Rosevear  <jpr@ximian.com>

	* Makefile.am (INCLUDES): remove gtk deprecated flag

2003-11-18  JP Rosevear <jpr@ximian.com>

	* Makefile.am: remove db3 library, if you really want it, get it
	from e-d-s

2003-11-14  JP Rosevear <jpr@ximian.com>

	* Makefile.am: don't build the e-source stuff anymore, its in
	e-d-s now

2003-11-14  JP Rosevear <jpr@ximian.com>

	* test-source-list.c (on_idle_do_stuff): we only need the uid to
	remove and peek at stuff

	* e-source-list.h: update proto types

	* e-source-list.c (e_source_list_peek_source_by_uid): allow peek
	by uid only
	(e_source_list_remove_source_by_uid): allow removal by uid only

2003-11-07  Dan Winship  <danw@ximian.com>

	* ename/*: Removed. No longer used by evolution except via
	evolution-data-server.
	
	* Makefile.am (SUBDIRS): Remove ename

2003-11-07  JP Rosevear  <jpr@ximian.com>

	* Makefile.am: remove build sources from dist

2003-11-07  JP Rosevear <jpr@ximian.com>

	* Makefile.am: make sure the marshal header and source are in the
	source list

2003-10-31  Hans Petter Jansson  <hpj@ximian.com>

	* e-source.c (e_source_get_uri): Don't compress trailing slashes in
	URI elements.

2003-10-31  Not Zed  <NotZed@Ximian.com>

	* e-account.c (e_account_(sg)et_from_xml): add encrypt_key id, and
	change some of the names around to be more meaningful.

2003-10-17  Jeffrey Stedfast  <fejj@ximian.com>

	* e-host-utils.c (e_gethostbyname_r): If the system defines
	AI_ADDRCONFIG, set this flag on the hints.ai_flags member as well
	so that we don't resolve a host to an IPv6 addr when the node
	doesn't have any IPv6 source addresses.

2003-10-24  Dan Winship  <danw@ximian.com>

	* Makefile.am (libedb3util_la_LIBADD): add $(DB3_LDADD)

2003-10-22  Dan Winship  <danw@ximian.com>

	* e-bonobo-factory-util.[ch]: Gone; unused since 1.2

	* e-proxy.[ch]: Gone; nothing in evo uses soup any more.

	* Makefile.am (eutilinclude_HEADERS, libeutil_la_SOURCES): Remove
	e-proxy.[ch]

2003-10-20  Ettore Perazzoli  <ettore@ximian.com>

	* Makefile.am (pilot_compile) [! ENABLE_PILOT_CONDUITS]: Add
	md5-utils.c so it compiles even if you have no Pilot support.

2003-10-16  Rodrigo Moya <rodrigo@ximian.com>

	* e-source-list.c (e_source_list_sync): use gconf_client_notify_remove
	instead of g_source_remove for GConf notification IDs.
	(impl_finalize): remove the GConf notification also here.

2003-10-13  Rodrigo Moya <rodrigo@ximian.com>

	* e-source-group.[ch] (e_source_group_peek_source_by_name): added
	new function.

2003-10-10  Not Zed  <NotZed@Ximian.com>

	* e-account-list.c (e_account_list_find): add FIND_UID find type.

2003-09-26  Jeffrey Stedfast  <fejj@ximian.com>

	* e-host-utils.c (e_gethostbyaddr_r): IPv6 implementation
	rewritten to use getnameinfo() which is the proper function to use
	in this case. Fixes bug #46006 the Right Way (tm).

2003-09-25  Jeffrey Stedfast  <fejj@ximian.com>

	* e-host-utils.c (e_gethostbyaddr_r): Make sure that
	res->ai_canonname is non-NULL and that it doesn't match the
	numeric host address that we were trying to resolve. Fixes the
	second half of bug #46006.

2003-09-19  Jeffrey Stedfast  <fejj@ximian.com>

	* e-host-utils.c (e_gethostbyaddr_r): Work around a bug in glibc
	2.3.2's gethostbyaddr_r() implementation.

2003-09-15  Larry Ewing  <lewing@ximian.com>

	* e-source.c (e_source_dump_to_xml_node): make sure declarations
	precede the body.

2003-09-11  Dan Winship  <danw@ximian.com>

	* Makefile.am (noinst_LTLIBRARIES): Remove libeutil-static.la and
	libeconduit-static.la

	* ename/Makefile.am (noinst_LTLIBRARIES): Remove
	libename-static.la

2003-08-28  Hans Petter Jansson  <hpj@ximian.com>

	* eggtrayicon.[ch]: Added for tray icon support. To be removed when
	libgnomeui sports this functionality.

	* Makefile.am: Include eggtrayicon.

2003-08-27  Jeffrey Stedfast  <fejj@ximian.com>

	* e-mktemp.c (e_mktemp_cleanup): We need to unlink the full paths
	in the tmpdirs, not just the base path.

2003-08-20  Suresh Chandrasekharan <suresh.chandrasekharan@sun.com>
	
	* e-time-utils.c (parse_with_strptime): Fixes #43558 Appointment
	Editor always gives time validation error for apptmnts in non
	UTF-8/non ASCII locales.

2003-08-17  Ettore Perazzoli  <ettore@ximian.com>

	* test-source-list.c: No short letter for --key.

2003-08-15  Ettore Perazzoli  <ettore@ximian.com>

	* e-uid.c: #include <glib/gstrfuncs.h>

	* test-source-list.c: Add options to display, set and unset the
	color as well.

	* e-source.c: New members has_color, color in struct
	ESourcePrivate.
	(e_source_update_from_xml_node): Parse a color property from the
	XML node.  Protect from NULL name and relative_uri members as
	well.
	(e_source_dump_to_xml_node): Set a color property on the XML node.
	(e_source_get_color): New.
	(e_source_set_color): New.
	(e_source_unset_color): New.
	(e_source_new_from_xml_node): Use e_source_update_from_xml_node()
	instead of getting the data from the XML yourself.

2003-08-14  Ettore Perazzoli  <ettore@ximian.com>

	Add UIDs to ESource* items so we can distinguish renames from
	removals/additions.

	* test-source-list.c: Made --source and --group get UIDs instead
	of names.
	(on_idle_do_stuff): Updated behavior accordingly.
	(dump_list): Print "(No items)" if there are no groups.
	(dump_group): Print the UID of the group.
	(dump_source): Print the UID of the source.

	* e-source-list.c (load_from_gconf): Match with group UIDs instead
	of group names.
	(e_source_list_peek_source_by_uid): New.
	(e_source_list_peek_source_by_name): Removed.
	(e_source_list_peek_group_by_uid): New.
	(e_source_list_peek_group_by_name): Removed.
	(e_source_list_remove_group_by_uid): New.
	(e_source_list_remove_group_by_name): Removed.
	(e_source_list_remove_source_by_uid): New.
	(e_source_list_remove_source_by_name): Removed.

	* e-source-group.c: New member uid in struct ESourceGroupPrivate.
	(impl_finalize): Free it.
	(e_source_group_new): Set the uid member using e_uid_new().
	(e_source_group_peek_source_by_uid): New.
	(e_source_group_peek_source_by_name): Removed.
	(e_source_group_add_source): Check that the UID is unique, instead
	of the name.
	(e_source_group_remove_source_by_uid): New.
	(e_source_group_remove_source_by_name): Removed.
	(e_source_group_update_from_xmldoc): Use the UID to figure out
	which source has changed, instead of the name.
	(e_source_group_uid_from_xmldoc): New.
	(e_source_group_name_from_xmldoc): Removed.
	(e_source_group_new_from_xmldoc): Set the UID in the new group
	from the XML.
	(e_source_group_to_xml): Set a UID property in the XML.

	* e-source.c: New member uid in struct ESourcePrivate.
	(e_source_new): Initialize using e_uid_new().
	(impl_finalize): Free.
	(e_source_peek_uid): New.
	(e_source_new_from_xml_node): Set the UID from the XML node.
	(e_source_name_from_xml_node): Removed.
	(e_source_uid_from_xml_node): New.
	(e_source_dump_to_xml_node): Set the "uid" property on the XML
	node.

	* e-account.c (e_account_gen_uid): Removed.
	(e_account_new): Use e_uid_new() instead of e_account_gen_uid().

	* e-uid.c (e_uid_new): New file, new function.

2003-08-13  Ettore Perazzoli  <ettore@ximian.com>

	Fix up the semantics of "changed" signals on GConf changes.

	* e-source-group.c (e_source_group_update_from_xmldoc): Added new
	member ignore_source_changed in struct _ESourceGroupPrivate.
	(e_source_group_update_from_xmldoc): Increment
	ignore_source_changed before calling
	e_source_update_from_xml_node(), decrement afterwards.
	(source_changed_callback): Only emit "changed" if
	ignore_source_changed is zero.
	(e_source_group_update_from_xmldoc): Properly emit the "changed"
	signal when the base_uri or the name change.

	* e-source-list.c: Changed type of sync_idle_id from gboolean (!)
	to int and added new member ignore_group_changed in struct
	_ESourceListPrivate.
	(load_from_gconf): Increment ignore_group_changed before calling
	e_source_group_update_from_xmldoc() and decrement it afterwards.
	(group_changed_callback): Only emit the signal if
	ignore_group_changed is zero.

	* e-source.c (e_source_update_from_xml_node): Removed arg
	emit_signals.  Always emit signals.

	* e-source-group.c (e_source_group_update_from_xmldoc): Removed
	arg emit_signals.  Always emit signals.
	(e_source_group_update_from_xml): Likewise.

2003-08-11  Ettore Perazzoli  <ettore@ximian.com>

	* e-source.c (e_source_set_group): Weak_unref the current group if
	not NULL and properly handle the case where a NULL group is being
	passed in.

2003-08-11  Ettore Perazzoli  <ettore@ximian.com>

	* e-source-group.c: New file.
	* e-source-group.h: New file.
	* e-source-list.h: New file.
	* e-source-list.c: New file.
	* e-source.c: New file.
	* e-source.h: New file.
	* test-source-list.c: New file to test the above.

2003-08-11  Not Zed  <NotZed@Ximian.com>

	* e-msgport.c (e_thread_put): check pthread_create return code
	properly.
	(e_mutex_lock): check pthread* return codes properly.
	(e_mutex_unlock): Same here.
	(e_mutex_cond_wait): and here.

2003-08-05  Dan Winship  <danw@ximian.com>

	* e-html-utils.c (special_chars): add a flag for non-url chars
	(controls, whitespace, ", and |)
	(url_extract): Use that. When urlifying just a hostname, make sure
	it really is a hostname, and not just something like "www.c".
	(e_text_to_html_full): Deal with url_extract returning NULL in the
	"www." case
	(main): add a regression test, #ifdef E_HTML_UTILS_TEST

2003-07-24  Rodrigo Moya <rodrigo@ximian.com>

	* e-config-listener.c (add_key): just preload one level of GConf keys,
	since preloading all makes the calendar startup slow.

2003-07-23  Dan Winship  <danw@ximian.com>

	* Makefile.am: Use EVO_MARSHAL_RULE

	* e-component-listener.c (connection_listen_cb): Fix a non-ANSI
	switch label.

	* e-gui-utils.c: only include "art/empty.xpm" if
	HAVE_LIBGNOMEUI_GNOME_ICON_LOOKUP_H isn't defined

	* e-xml-hash-utils.c (e_xml_to_hash): Deconstify a non-const
	variable to fix a warning.

2003-07-03  JP Rosevear  <jpr@ximian.com>
 
 	* e-xml-hash-utils.c (foreach_save_func): encode the text
 	(e_xml_from_hash): pass xmlDoc to foreach method
 	(e_xmlhash_new): check for file existence
 	(e_xmlhash_destroy): only destroy the hash if it exists
	
2003-07-01  Dan Winship  <danw@ximian.com>

	* e-gui-utils.c (e_icon_for_mime_type): New function to return an
	icon for a MIME type, using GnomeIconTheme if available or
	gnome-vfs and gnome-mime-data if not.

2003-06-19  Dan Winship  <danw@ximian.com>

	* e-xml-hash-utils.c (e_xml_to_hash): don't leak an extra copy of
	the values

2003-06-14  Larry Ewing  <lewing@ximian.com>

	* e-name-western.c (e_name_western_get_suffix_at_str_end): free
	word before breaking out of the loop.

2003-06-12  Rodrigo Moya <rodrigo@ximian.com>

	* e-config-listener.c (add_key): use GCONF_CLIENT_PRELOAD_RECURSIVE
	when adding watched directories to avoid GConfd round-trips.

2003-06-12  Jeffrey Stedfast  <fejj@ximian.com>

	* e-trie.c (e_trie_free): Free the fail_states array.

2003-05-30  Jeffrey Stedfast  <fejj@ximian.com>

	* e-meta.c (meta_load): Stat the file to make sure it exists
	before trying to parse it using xmlParseFile().

