2004-01-24  JP Rosevear <jpr@ximian.com>

	* e-folder-map.c: turn off debugging

2004-01-24  Chris Toshok  <toshok@ximian.com>

	* e-folder-map.c (e_folder_map_dir): use GDir/g_build_filename,
	and g_file_test.
	(e_folder_map_local_folders): same.

2004-01-23  JP Rosevear <jpr@ximian.com>

	* Makefile.am: build new sources

	* e-folder-map.[hc]: builds a list of 1.4 folder paths of a
	certain type

2004-01-20  JP Rosevear <jpr@ximian.com>

	* Makefile.am: don't build dead files

	* e-xml-hash-utils.[hc]: kill, these were moved to e-d-s long ago

2004-01-14  Jeffrey Stedfast  <fejj@ximian.com>

	* e-bconf-map.[c,h]: New source files for mapping bonobo-conf keys
	to gconf keys. Moved out of shell/e-config-upgrade.c

2004-01-13  Not Zed  <NotZed@Ximian.com>

	* e-msgport.c (em_cache*): A time-based thread-safe in-memory
	cache thing.  Called em_cache 'cause there's an e_cache in gal.

2004-01-05  Not Zed  <NotZed@Ximian.com>

	* e-memory.c (e_mempool_destroy): Fix from Zan Lynx
	<zlynx@acm.org> to lock the memchunk before freeing the pool
	header.

2003-12-06  JP Rosevear <jpr@ximian.com>

	* Makefile.am: Remove hard coded disable deprecated flags

2003-11-23  JP Rosevear  <jpr@ximian.com>

	* Makefile.am (INCLUDES): remove gtk deprecated flag

2003-11-18  JP Rosevear <jpr@ximian.com>

	* Makefile.am: remove db3 library, if you really want it, get it
	from e-d-s

2003-11-14  JP Rosevear <jpr@ximian.com>

	* Makefile.am: don't build the e-source stuff anymore, its in
	e-d-s now

2003-11-14  JP Rosevear <jpr@ximian.com>

	* test-source-list.c (on_idle_do_stuff): we only need the uid to
	remove and peek at stuff

	* e-source-list.h: update proto types

	* e-source-list.c (e_source_list_peek_source_by_uid): allow peek
	by uid only
	(e_source_list_remove_source_by_uid): allow removal by uid only

2003-11-07  Dan Winship  <danw@ximian.com>

	* ename/*: Removed. No longer used by evolution except via
	evolution-data-server.
	
	* Makefile.am (SUBDIRS): Remove ename

2003-11-07  JP Rosevear  <jpr@ximian.com>

	* Makefile.am: remove build sources from dist

2003-11-07  JP Rosevear <jpr@ximian.com>

	* Makefile.am: make sure the marshal header and source are in the
	source list

2003-10-31  Hans Petter Jansson  <hpj@ximian.com>

	* e-source.c (e_source_get_uri): Don't compress trailing slashes in
	URI elements.

2003-10-31  Not Zed  <NotZed@Ximian.com>

	* e-account.c (e_account_(sg)et_from_xml): add encrypt_key id, and
	change some of the names around to be more meaningful.

2003-10-17  Jeffrey Stedfast  <fejj@ximian.com>

	* e-host-utils.c (e_gethostbyname_r): If the system defines
	AI_ADDRCONFIG, set this flag on the hints.ai_flags member as well
	so that we don't resolve a host to an IPv6 addr when the node
	doesn't have any IPv6 source addresses.

2003-10-24  Dan Winship  <danw@ximian.com>

	* Makefile.am (libedb3util_la_LIBADD): add $(DB3_LDADD)

2003-10-22  Dan Winship  <danw@ximian.com>

	* e-bonobo-factory-util.[ch]: Gone; unused since 1.2

	* e-proxy.[ch]: Gone; nothing in evo uses soup any more.

	* Makefile.am (eutilinclude_HEADERS, libeutil_la_SOURCES): Remove
	e-proxy.[ch]

2003-10-20  Ettore Perazzoli  <ettore@ximian.com>

	* Makefile.am (pilot_compile) [! ENABLE_PILOT_CONDUITS]: Add
	md5-utils.c so it compiles even if you have no Pilot support.

2003-10-16  Rodrigo Moya <rodrigo@ximian.com>

	* e-source-list.c (e_source_list_sync): use gconf_client_notify_remove
	instead of g_source_remove for GConf notification IDs.
	(impl_finalize): remove the GConf notification also here.

2003-10-13  Rodrigo Moya <rodrigo@ximian.com>

	* e-source-group.[ch] (e_source_group_peek_source_by_name): added
	new function.

2003-10-10  Not Zed  <NotZed@Ximian.com>

	* e-account-list.c (e_account_list_find): add FIND_UID find type.

2003-09-26  Jeffrey Stedfast  <fejj@ximian.com>

	* e-host-utils.c (e_gethostbyaddr_r): IPv6 implementation
	rewritten to use getnameinfo() which is the proper function to use
	in this case. Fixes bug #46006 the Right Way (tm).

2003-09-25  Jeffrey Stedfast  <fejj@ximian.com>

	* e-host-utils.c (e_gethostbyaddr_r): Make sure that
	res->ai_canonname is non-NULL and that it doesn't match the
	numeric host address that we were trying to resolve. Fixes the
	second half of bug #46006.

2003-09-19  Jeffrey Stedfast  <fejj@ximian.com>

	* e-host-utils.c (e_gethostbyaddr_r): Work around a bug in glibc
	2.3.2's gethostbyaddr_r() implementation.

2003-09-15  Larry Ewing  <lewing@ximian.com>

	* e-source.c (e_source_dump_to_xml_node): make sure declarations
	precede the body.

2003-09-11  Dan Winship  <danw@ximian.com>

	* Makefile.am (noinst_LTLIBRARIES): Remove libeutil-static.la and
	libeconduit-static.la

	* ename/Makefile.am (noinst_LTLIBRARIES): Remove
	libename-static.la

2003-08-28  Hans Petter Jansson  <hpj@ximian.com>

	* eggtrayicon.[ch]: Added for tray icon support. To be removed when
	libgnomeui sports this functionality.

	* Makefile.am: Include eggtrayicon.

2003-08-27  Jeffrey Stedfast  <fejj@ximian.com>

	* e-mktemp.c (e_mktemp_cleanup): We need to unlink the full paths
	in the tmpdirs, not just the base path.

2003-08-20  Suresh Chandrasekharan <suresh.chandrasekharan@sun.com>
	
	* e-time-utils.c (parse_with_strptime): Fixes #43558 Appointment
	Editor always gives time validation error for apptmnts in non
	UTF-8/non ASCII locales.

2003-08-17  Ettore Perazzoli  <ettore@ximian.com>

	* test-source-list.c: No short letter for --key.

2003-08-15  Ettore Perazzoli  <ettore@ximian.com>

	* e-uid.c: #include <glib/gstrfuncs.h>

	* test-source-list.c: Add options to display, set and unset the
	color as well.

	* e-source.c: New members has_color, color in struct
	ESourcePrivate.
	(e_source_update_from_xml_node): Parse a color property from the
	XML node.  Protect from NULL name and relative_uri members as
	well.
	(e_source_dump_to_xml_node): Set a color property on the XML node.
	(e_source_get_color): New.
	(e_source_set_color): New.
	(e_source_unset_color): New.
	(e_source_new_from_xml_node): Use e_source_update_from_xml_node()
	instead of getting the data from the XML yourself.

2003-08-14  Ettore Perazzoli  <ettore@ximian.com>

	Add UIDs to ESource* items so we can distinguish renames from
	removals/additions.

	* test-source-list.c: Made --source and --group get UIDs instead
	of names.
	(on_idle_do_stuff): Updated behavior accordingly.
	(dump_list): Print "(No items)" if there are no groups.
	(dump_group): Print the UID of the group.
	(dump_source): Print the UID of the source.

	* e-source-list.c (load_from_gconf): Match with group UIDs instead
	of group names.
	(e_source_list_peek_source_by_uid): New.
	(e_source_list_peek_source_by_name): Removed.
	(e_source_list_peek_group_by_uid): New.
	(e_source_list_peek_group_by_name): Removed.
	(e_source_list_remove_group_by_uid): New.
	(e_source_list_remove_group_by_name): Removed.
	(e_source_list_remove_source_by_uid): New.
	(e_source_list_remove_source_by_name): Removed.

	* e-source-group.c: New member uid in struct ESourceGroupPrivate.
	(impl_finalize): Free it.
	(e_source_group_new): Set the uid member using e_uid_new().
	(e_source_group_peek_source_by_uid): New.
	(e_source_group_peek_source_by_name): Removed.
	(e_source_group_add_source): Check that the UID is unique, instead
	of the name.
	(e_source_group_remove_source_by_uid): New.
	(e_source_group_remove_source_by_name): Removed.
	(e_source_group_update_from_xmldoc): Use the UID to figure out
	which source has changed, instead of the name.
	(e_source_group_uid_from_xmldoc): New.
	(e_source_group_name_from_xmldoc): Removed.
	(e_source_group_new_from_xmldoc): Set the UID in the new group
	from the XML.
	(e_source_group_to_xml): Set a UID property in the XML.

	* e-source.c: New member uid in struct ESourcePrivate.
	(e_source_new): Initialize using e_uid_new().
	(impl_finalize): Free.
	(e_source_peek_uid): New.
	(e_source_new_from_xml_node): Set the UID from the XML node.
	(e_source_name_from_xml_node): Removed.
	(e_source_uid_from_xml_node): New.
	(e_source_dump_to_xml_node): Set the "uid" property on the XML
	node.

	* e-account.c (e_account_gen_uid): Removed.
	(e_account_new): Use e_uid_new() instead of e_account_gen_uid().

	* e-uid.c (e_uid_new): New file, new function.

2003-08-13  Ettore Perazzoli  <ettore@ximian.com>

	Fix up the semantics of "changed" signals on GConf changes.

	* e-source-group.c (e_source_group_update_from_xmldoc): Added new
	member ignore_source_changed in struct _ESourceGroupPrivate.
	(e_source_group_update_from_xmldoc): Increment
	ignore_source_changed before calling
	e_source_update_from_xml_node(), decrement afterwards.
	(source_changed_callback): Only emit "changed" if
	ignore_source_changed is zero.
	(e_source_group_update_from_xmldoc): Properly emit the "changed"
	signal when the base_uri or the name change.

	* e-source-list.c: Changed type of sync_idle_id from gboolean (!)
	to int and added new member ignore_group_changed in struct
	_ESourceListPrivate.
	(load_from_gconf): Increment ignore_group_changed before calling
	e_source_group_update_from_xmldoc() and decrement it afterwards.
	(group_changed_callback): Only emit the signal if
	ignore_group_changed is zero.

	* e-source.c (e_source_update_from_xml_node): Removed arg
	emit_signals.  Always emit signals.

	* e-source-group.c (e_source_group_update_from_xmldoc): Removed
	arg emit_signals.  Always emit signals.
	(e_source_group_update_from_xml): Likewise.

2003-08-11  Ettore Perazzoli  <ettore@ximian.com>

	* e-source.c (e_source_set_group): Weak_unref the current group if
	not NULL and properly handle the case where a NULL group is being
	passed in.

2003-08-11  Ettore Perazzoli  <ettore@ximian.com>

	* e-source-group.c: New file.
	* e-source-group.h: New file.
	* e-source-list.h: New file.
	* e-source-list.c: New file.
	* e-source.c: New file.
	* e-source.h: New file.
	* test-source-list.c: New file to test the above.

2003-08-11  Not Zed  <NotZed@Ximian.com>

	* e-msgport.c (e_thread_put): check pthread_create return code
	properly.
	(e_mutex_lock): check pthread* return codes properly.
	(e_mutex_unlock): Same here.
	(e_mutex_cond_wait): and here.

2003-08-05  Dan Winship  <danw@ximian.com>

	* e-html-utils.c (special_chars): add a flag for non-url chars
	(controls, whitespace, ", and |)
	(url_extract): Use that. When urlifying just a hostname, make sure
	it really is a hostname, and not just something like "www.c".
	(e_text_to_html_full): Deal with url_extract returning NULL in the
	"www." case
	(main): add a regression test, #ifdef E_HTML_UTILS_TEST

2003-07-24  Rodrigo Moya <rodrigo@ximian.com>

	* e-config-listener.c (add_key): just preload one level of GConf keys,
	since preloading all makes the calendar startup slow.

2003-07-23  Dan Winship  <danw@ximian.com>

	* Makefile.am: Use EVO_MARSHAL_RULE

	* e-component-listener.c (connection_listen_cb): Fix a non-ANSI
	switch label.

	* e-gui-utils.c: only include "art/empty.xpm" if
	HAVE_LIBGNOMEUI_GNOME_ICON_LOOKUP_H isn't defined

	* e-xml-hash-utils.c (e_xml_to_hash): Deconstify a non-const
	variable to fix a warning.

2003-07-03  JP Rosevear  <jpr@ximian.com>
 
 	* e-xml-hash-utils.c (foreach_save_func): encode the text
 	(e_xml_from_hash): pass xmlDoc to foreach method
 	(e_xmlhash_new): check for file existence
 	(e_xmlhash_destroy): only destroy the hash if it exists
	
2003-07-01  Dan Winship  <danw@ximian.com>

	* e-gui-utils.c (e_icon_for_mime_type): New function to return an
	icon for a MIME type, using GnomeIconTheme if available or
	gnome-vfs and gnome-mime-data if not.

2003-06-19  Dan Winship  <danw@ximian.com>

	* e-xml-hash-utils.c (e_xml_to_hash): don't leak an extra copy of
	the values

2003-06-14  Larry Ewing  <lewing@ximian.com>

	* e-name-western.c (e_name_western_get_suffix_at_str_end): free
	word before breaking out of the loop.

2003-06-12  Rodrigo Moya <rodrigo@ximian.com>

	* e-config-listener.c (add_key): use GCONF_CLIENT_PRELOAD_RECURSIVE
	when adding watched directories to avoid GConfd round-trips.

2003-06-12  Jeffrey Stedfast  <fejj@ximian.com>

	* e-trie.c (e_trie_free): Free the fail_states array.

2003-05-30  Jeffrey Stedfast  <fejj@ximian.com>

	* e-meta.c (meta_load): Stat the file to make sure it exists
	before trying to parse it using xmlParseFile().

