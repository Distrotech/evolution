2006-04-18  Jeffrey Stedfast  <fejj@novell.com>

	* new-mail-notify.c (org_gnome_message_reading_notify): Don't try
	and send a dbus message if the bus is down.
	(org_gnome_new_mail_notify): Same.
	(init_dbus): New function to init the dbus connection and setup
	handlers for when the bus gets unexpectedly disconnected.
	(e_plugin_lib_enable): When the plugin gets disabled, unref the
	dbus connection and reset it back to NULL.

2005-08-23  Not Zed  <NotZed@Ximian.com>

	* new-mail-notify.c: forward-define e_plugin_lib_enable, remove
	some unecessary headers.
	(send_dbus_message): remove spurious check for bus==NULL.

2005-07-11  Vivek Jain  <jvivek@novell.com>
	
	* new-mail-notify.c :(send_dbus_message)
	check whether memory could be allocated. Return if the 
	message is NULL so that we don't unref it again, will save crash.
	**Fixes #274329 sort of bugs, in case reported even after 
	david's fix.

2005-05-11  Not Zed  <NotZed@Ximian.com>

	* Makefile.am: added built_sources/cleanfiles

2005-05-06  Not Zed  <NotZed@Ximian.com>

	* new-mail-notify.c: make the bus connection global and keep track
	of the gconf state directly too.
	(org_gnome_new_mail_config): removed configuration section,
	implicitly enabled by enabling the plugin now.

2005-04-06  Timo Hoenig  <thoenig@novell.com>

	* new-mail-notify.c (send_dbus_message): added two checks to prevent
	Evolution to crash if the D-BUS session bus is not running or if
	D-BUS is not able to allocate memory for the message
	* new-mail-notify.c (e_plugin_lib_enable): refuse to load the plugin
	if the address of the D-BUS session bus can not be determined
	* new-mail-notify.c (e_plugin_lib_enable): new function

2005-05-06  Not Zed  <NotZed@Ximian.com>

	* Makefile.am: 
	* org-gnome-new-mail-notify.eplug.xml: s/.in/.xml/ & i18n.

2005-03-11  David Malcolm  <dmalcolm@redhat.com>

	* new-mail-notify.c: preprocessor hackery using the value of
	DBUS_VERSION to cope with changes to the semantics of
	dbus_message_append_args
	
	* Makefile.am: define the DBUS_VERSION in the preprocessor

2005-02-24  Bj√∂rn Torkelsson  <torkel@acc.umu.se>

	* org-gnome-new-mail-notify.eplug.in: Added id for mail preferences.

2005-01-13  Not Zed  <NotZed@Ximian.com>

	* new-mail-notify.c: added prototypes for exported functions,
	re-arranged slightly to staticise internal functions.

	* new-mail-notify.h: removed.

2005-01-12  Miguel Angel Lopez Hernandez  <miguel@gulev.org.mx>

	* new-mail-notify.[ch]: Fix author's name, changes in code
	to maintain coding style
	(org_gnome_new_mail_notify): Now sends the dbus message using
	the send_dbus_message function
	(org_gnome_message_reading_notify): Added function, called when
	a message.reading event is fired
	(send_dbus_message): Added function, generic function to send
	dbus messages

	* org-gnome-new-mail-notify.eplug.in: define the message reading 
	event

2005-01-11  JP Rosevear  <jpr@novell.com>

	* Makefile.am: add new-mail-notify.h so it gets disted

2005-01-11  Not Zed  <NotZed@Ximian.com>

	* new-mail-notify.c (org_gnome_new_mail_config)
	(org_gnome_new_mail_notify): renamed slightly for
	namespace/consistency.
	(org_gnome_new_mail_notify): fixed signature.
	(org_gnome_new_mail_notify): fixed some warnings & formatting.

2004-12-30  Miguel Angel Lopez Hernandez  <miguel@gulev.org.mx>

	* new-mail-notify.[ch]: Plugin implementation 

	* org-gnome-new-mail-notify.eplug.in: define the
	new mail notify plugin

	* Makefile.am: build the new mail notify plugin

