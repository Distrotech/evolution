
glade_DATA = filter.glade

INCLUDES = 					\
	-I $(top_srcdir)			\
	-I $(top_srcdir)/camel			\
	-I $(top_srcdir)/e-util			\
	-I $(top_srcdir)/shell			\
	-DFILTER_GLADEDIR=\"$(gladedir)\"	\
	-DG_LOG_DOMAIN=\"filter\"		\
	-DG_DISABLE_DEPRECATED			\
	-DGTK_DISABLE_DEPRECATED		\
	$(LIBFILTER_CFLAGS)

noinst_LTLIBRARIES =				\
	libfilter.la

libfilter_la_SOURCES =				\
	filter-code.c				\
	filter-code.h				\
	filter-colour.c				\
	filter-colour.h				\
	filter-context.c			\
	filter-context.h			\
	filter-datespec.c			\
	filter-datespec.h			\
	filter-editor.c				\
	filter-editor.h				\
	filter-element.c			\
	filter-element.h			\
	filter-file.c				\
	filter-file.h				\
	filter-filter.c				\
	filter-filter.h				\
	filter-folder.c				\
	filter-folder.h				\
	filter-input.c				\
	filter-input.h				\
	filter-int.c				\
	filter-int.h				\
	filter-label.c				\
	filter-label.h				\
	filter-marshal.c			\
	filter-marshal.h			\
	filter-option.c				\
	filter-option.h				\
	filter-part.c				\
	filter-part.h				\
	filter-rule.c				\
	filter-rule.h				\
	filter-source.h				\
	filter-source.c				\
	rule-context.c				\
	rule-context.h				\
	rule-editor.c				\
	rule-editor.h				\
	score-context.c				\
	score-context.h				\
	score-editor.c				\
	score-editor.h				\
	score-rule.c				\
	score-rule.h				\
	vfolder-context.c			\
	vfolder-context.h			\
	vfolder-editor.c			\
	vfolder-editor.h			\
	vfolder-rule.c				\
	vfolder-rule.h

libfilter_la_DEPENDENCIES = libfilter-i18n.h

EXTRA_DIST =					\
	$(glade_DATA)				\
	ChangeLog.pre-1-4			\
	filter-marshal.list			\
	filtertypes.xml				\
	libfilter-i18n.h			\
	vfoldertypes.xml

# basic rules.
filterdir = $(privdatadir)
filter_DATA = filtertypes.xml vfoldertypes.xml

libfilter-i18n.h: filtertypes.xml vfoldertypes.xml
	echo "/* Automatically generated. Do not edit. */" > $@;	      \
	cat $(srcdir)/filtertypes.xml $(srcdir)/vfoldertypes.xml |	      \
		sed -n -e 's:.*<title>\(.*\)</title>:char *s = N_("\1");:p' | \
		sort -u >> $@

filter-marshal.h: filter-marshal.list
	( @GLIB_GENMARSHAL@ --prefix=filter_marshal filter-marshal.list --header > filter-marshal.tmp \
	&& mv filter-marshal.tmp filter-marshal.h ) \
	|| ( rm -f filter-marshal.tmp && exit 1 )

filter-marshal.c: filter-marshal.h
	( @GLIB_GENMARSHAL@ --prefix=filter_marshal filter-marshal.list --body > filter-marshal.tmp \
	&& mv filter-marshal.tmp filter-marshal.c ) \
	|| ( rm -f filter-marshal.tmp && exit 1 )

MARSHAL_GENERATED = filter-marshal.c filter-marshal.h

