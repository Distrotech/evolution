2001-11-21  Not Zed  <NotZed@Ximian.com>

	* e-filter-bar.c (menubar_activated): Mark the dialogue as already
	up so we dont allow multiple dialogues up.  Behaviour fix part of
	#15745.

2001-11-28  Damon Chaplin  <damon@ximian.com>

	* e-map.c: updated to new version from Ximian Setup Tools.
	Fixes bug #7641.

2001-11-27  Damon Chaplin  <damon@ximian.com>

	* e-dateedit.c (e_date_edit_get_date): if allow_no_date_set is FALSE,
	return the last valid date entered, even if the field is currently
	empty. Fixes bug #15749.

2001-11-05  JP Rosevear  <jpr@ximian.com>

	* e-dateedit.c (e_date_edit_set_date_and_time_of_day): set both
	the date and the time of day in one call, creating only a single
	changed signal

	* e-dateedit.h: add proto

2001-11-05  Christopher James Lahey  <clahey@ximian.com>

Based on a patch by Damon Chaplin <damon@ximian.com>

	* e-cell-date-edit.c: Connect to the button_press signal on the
	popup and do the grab correctly so that this dialog behaves
	properly when the user clicks it away.  Also, changed all
	instances of setting of popup_shown field of ECellPopup to call
	e_cell_popup_set_shown.  Fixes Ximian bug #14016.

2001-10-31    <NotZed@Ximian.com>

	* e-filter-bar.c (build_items): Snotty code so we only disconnect
	to rules we no longer have, etc.

2001-11-01  Not Zed  <NotZed@Ximian.com>

	* e-filter-bar.c (build_items): Ref and connect to rule changed
	here, also clear out previous ref's.
	(generate_menu): No longer connect to rules, or reset rule array.
	(set_option): Dont reset option rules array.
	(context_rule_removed): Disconnect changed event on rule.
	(clear_rules): Fujnction to clear rules from an array.
	(destroy): Disconnect from context signals, and clear rules arrays.

	* e-filter-bar.h: Remove hash table for change id's.

2001-10-30  Damon Chaplin  <damon@ximian.com>

	* e-dateedit.c (e_date_edit_set_time_of_day): emit signal when time
	set to none/empty.

2001-10-30    <NotZed@Ximian.com>

	* e-filter-bar.c (generate_menu): Hook to rule changed events.
	(destroy): Free change id table/unconnect to signals.
	(init): Setup change id table.
	(e_filter_bar_new): Hook onto rule removed signal.
	(context_rule_removed): If rule removed, disconnect from signal handler.
	(rule_changed): For changed rules, also rebuild menu.  Fixed #12233.

2001-10-30  Damon Chaplin  <damon@ximian.com>

	* e-cell-date-edit.c (e_cell_date_edit_set_popup_values): try to parse
	just a date first, and if that works we assume it is a DATE value,
	so we clear the time field in the popup.
	(e_cell_date_edit_on_ok_clicked): if the time field is empty, use a
	DATE value.
	Also removed some debug messages.

2001-10-30    <NotZed@Ximian.com>

	* e-filter-bar.c (set_option): Set the item to the option_base on
	it, so the current item is set.  Fix for #7081.

2001-10-30  Christopher James Lahey  <clahey@ximian.com>

	* e-cell-date-edit.c (e_cell_date_edit_get_popup_pos): Adapt to
	the new ECellPopup signature.

2001-10-29  Damon Chaplin  <damon@ximian.com>

	* e-calendar-item.c (e_calendar_item_signal_emission_idle_cb): ref
	the ECalendarItem and check if it gets destroyed, to try to avoid a
	free memory write.

	* e-dateedit.c (e_date_edit_set_time_of_day): allow setting the time
	to empty by passing hour as -1.

2001-10-23  Jeffrey Stedfast  <fejj@ximian.com>

	* e-filter-bar.c (rule_editor_clicked): Don't add the menu item
	here, do this in the context_changed signal callback instead.
	(context_changed): rebuild the search menu.
	(set_menu): Copy the items into a default_items list so we can
	regenerate the menu when something changes. Then call
	generate_menu().
	(generate_menu): Do what set_menu() used to do.
	(e_filter_bar_new): Don't do a rule_context_load() anymore since
	we don't need to.
	(destroy): free the default_items list.

2001-10-23  Damon Chaplin  <damon@ximian.com>

	* e-search-bar.c (copy_subitems): copy the translate field over as
	well. Should fix an uninitialized memory read.

2001-10-23  Damon Chaplin  <damon@ximian.com>

	* e-dateedit.c (e_date_edit_check_date_changed):
	(e_date_edit_check_time_changed): clear the struct tm fields to keep
	purify happy.

2001-10-22  Damon Chaplin  <damon@ximian.com>

	* e-cell-date-edit.c (e_cell_date_edit_set_popup_values): 
	(e_cell_date_edit_update_cell): use the new ECellText methods to get
	the text and set the value.

	* e-cell-percent.c: new subclass of ECellText to display & edit a
	percentage value.

2001-10-20  Jon Trowbridge  <trow@ximian.com>

	* e-dateedit.c (e_date_edit_check_date_changed): Keep us from
	reading tmp_tm uninitialized, so purify won't complain.

2001-10-09  Jeffrey Stedfast  <fejj@ximian.com>

	* e-charset-picker.c (e_charset_picker_bonobo_ui_populate): Now
	takes a menu path argument.

2001-10-04  Rodrigo Moya <rodrigo@ximian.com>

	* Makefile.am: added BONOBO_GNOME_CFLAGS to make it compile with
	latest Bonobo

2001-10-04  Christopher James Lahey  <clahey@ximian.com>

	* e-cell-date-edit.c (e_cell_date_edit_get_popup_pos): Call
	gnome_canvas_world_to_window here.  Finishes fixing Ximian bug
	#2613.

2001-09-18  Damon Chaplin  <damon@ximian.com>

	* e-dateedit.c (e_date_edit_grab_focus): grab focus to the date entry
	or the time entry, depending on which is visible. Fixes bug #7237.

2001-09-16  Chris Toshok  <toshok@ximian.com>

	* e-dateedit.h: add prototype for e_date_edit_set_editable.

	* e-dateedit.c (e_date_edit_set_editable): new function, analogous
	to gtk_entry_set_editable: let's the user select but not edit (or
	in this case, bring up the calendar view.)

2001-09-13  Jeffrey Stedfast  <fejj@ximian.com>

	* e-search-bar.c (set_dropdown): Don't unref the old dropdown, we
	don't "own" it.

2001-09-13  Larry Ewing  <lewing@ximian.com>

	* e-search-bar.c (set_dropdown): unref the old dropdown_menu if
	there is one.

2001-09-12  Jeffrey Stedfast  <fejj@ximian.com>

	* e-filter-bar.c (menubar_activated): No longer need the context
	in order to clone a FilterRule.
	(option_changed): Same.

2001-09-06  Anna Marie Dirks  <anna@ximian.com>

	* e-filter-bar.c: added a default size for the saved search
	dialog of 600 x 300 such that it opens at a usable size. 
	this fixes bug #7083.

2001-09-05  Anna Marie Dirks  <anna@ximian.com>

	* e-search-bar.c (add_activate_button): added a wee bit of 
	padding around the find now label in response to bug #7049.

2001-08-23  Federico Mena Quintero  <federico@ximian.com>

	* e-search-bar.c (e_search_bar_set_ids): New function to set the
	item_id and the subitem_id simultaneously.

2001-08-16  Damon Chaplin  <damon@ximian.com>

	* e-dateedit.c: added e_date_edit_get/set_make_time_insensitive()
	which makes the time field insensitive rather than hiding it.
	I'm not sure we're going to actually use this now, though.

2001-08-16  Ettore Perazzoli  <ettore@ximian.com>

	* e-search-bar.c (activate_by_subitems): Set the horizontal usize
	of the entry to 4.

2001-08-16  Jon Trowbridge  <trow@ximian.com>

	* e-filter-bar.c (option_changed): Adjusted for renamed ESearchBar
	functions.
	(menubar_activated): Adjusted for renamed ESearchBar functions.

	* e-search-bar.c: Renames some of the horrible function names:
	s/option_choice/item_id/, s/suboption_choice/subitem_id/.

2001-08-14  Federico Mena Quintero  <federico@ximian.com>

	* e-cell-date-edit.c (e_cell_date_edit_destroy): Destroy, do not
	unref, the popup_window.

2001-08-14  Federico Mena Quintero  <federico@ximian.com>

	* e-search-bar.c (activate_by_subitems): Correctness fixes for
	when the entry and submenu must be interchanged.

2001-08-14  Federico Mena Quintero  <federico@ximian.com>

	*Please* add accessor functions instead of just object arguments!

	* e-search-bar.c (e_search_bar_set_option_choice): New function.
	(e_search_bar_set_suboption_choice): New function.
	(e_search_bar_set_text): New function.
	(impl_set_arg): Use the functions above instead of setting things
	directly.
	(add_dropdown): If the item is a separator, set it as insensitive.
	(activate_by_subitems): Handle the translate field in the subitem
	structure.  Also, allow the creation of separators by having NULL
	text strings in the subitems.
	(set_option): If the item is a separator, set it as insensitive.
	(set_option): Do not use the subitem_garbage hack.  Do proper
	memory management instead.
	(e_search_bar_set_suboption): New function to change the suboption
	items in a search bar.

	* e-search-bar.h (ESearchBarSubitem): Added a `translate' field.
	This API sucks so much it is not funny.
	(ESearchBar): Removed the subitem_garbage hack.  Please do proper
	memory management.

2001-08-14  Jon Trowbridge  <trow@ximian.com>

	* e-search-bar.c (activate_by_subitems): Oops... initial
	suboption_choice should be subitems[0].id, not 0.

2001-08-10  Jeffrey Stedfast  <fejj@ximian.com>

	* e-search-bar.c (impl_destroy): Oops, we didn't need to unref all
	of the widgets, just a few.

2001-08-10  Jon Trowbridge  <trow@ximian.com>

	* e-filter-bar.h: Set the subitems to NULL in the pre-defined
	ESearchBarItems.

	* e-filter-bar.c (rule_editor_clicked): Set the ESearchBarItem's
	subitems to NULL.
	(build_items): Set the ESearchBarItem's subitems to NULL.
	(e_filter_bar_new): Set the ESearchBarItem's subitems to NULL.

	* e-search-bar.c: Added support for subitems, so that a search
	option can key off of another option menu rather than just an
	entry.

2001-08-10  Jeffrey Stedfast  <fejj@ximian.com>

	* e-filter-bar.c (destroy): Free all the goodies that we allocate
	at construct time and unref the rule context.
	(class_init): Override the destroy method.

2001-08-09  Anna Marie Dirks <anna@ximian.com>

	Fixes bug #6918
	
	* e-filter-bar.h: Changed the "Save As.." menu item to 
	"Add to Saved Searches".

2001-08-09  Anna Marie Dirks <anna@ximian.com> 
	* e-filter-bar.h : changed the E_FILTERBAR_RESET label from
	"Show All" to "Clear" to alleviate confusion about whether
	"Show All" means that hidden messages are also shown or not.
	(See ximian bug #6743) 	

2001-08-09  Federico Mena Quintero  <federico@ximian.com>

	* e-calendar-item.c (e_calendar_item_destroy): Chain to the
	destroy handler in the parent class!

	* e-clipped-label.c (e_clipped_label_destroy): Likewise.  Sigh.

	* e-dropdown-button.c (impl_destroy): Likewise.  Double sigh.

2001-08-08  Anna Marie Dirks <anna@ximian.com> 

	* e-search-bar.c: Re-labeled the "Activate" button "Find Now".

2001-08-08  Ettore Perazzoli  <ettore@ximian.com>

	* e-bonobo-widget.c: New.
	* e-bonobo-widget.h: New.

2001-08-05  Ettore Perazzoli  <ettore@ximian.com>

	[Added an "Activate" button to the search bar.]

	* e-search-bar.c (submit_button_clicked_cb): Callback for the
	"clicked" signal on the activate button.
	(add_submit): New function to add a "Activate" button on the right
	of the entry.
	(e_search_bar_construct): Call it.
	(add_spacer): Removed.
	(e_search_bar_construct): Don't call it.
	(find_id): Remove debugging message.
	(put_in_spacer_widget): New utility function to create a
	GtkEventBox with a border width of one and put a widget into it.

2001-08-04  Ettore Perazzoli  <ettore@ximian.com>

	* e-title-bar.c: Make the close icon as large as the pin icon so
	the bar doesn't change size when it switches between them.
	(e_title_bar_construct): Add some horizontal padding to the label
	to make it look nicer.

2001-08-03  Federico Mena Quintero  <federico@ximian.com>

	* e-calendar-item.c (e_calendar_item_mark_day): Request an update.
	(e_calendar_item_mark_days): Likewise.

2001-07-24  Damon Chaplin  <damon@ximian.com>

	* e-calendar-item.c (e_calendar_item_show_popup_menu): don't show the
	year in the popup submenu for the months, and center the months.
	Fixes

2001-07-18  Jeffrey Stedfast  <fejj@ximian.com>

	* e-filter-bar.c (rule_editor_destroyed): When the dialog gets
	closed, always make sure the entry widget becomes sensitive again.
	(menubar_activated): Don't use FILTER_SOURCE_INCOMING because
	that's not what we want, we want (I think) NULL (at least with
	NULL, bug #4490 goes away).

2001-07-16  Federico Mena Quintero  <federico@ximian.com>

	Fixes bug #2901.

	* e-dateedit.c (e_date_edit_parse_date): Use e_time_parse_date().
	(e_date_edit_parse_time): Use e_time_parse_time().

2001-07-17  jacob berkman  <jacob@ximian.com>

	* e-search-bar.c (set_dropdown): don't unset _CAN_FOCUS

	* e-dropdown-button.c (menu_deactivate_cb): un-toggle ourself
	(impl_toggled): override the toggled rather than clicked signal.
	if we are active, popup the menu; else, popdown

	these fix ximian #2016

2001-07-02  Damon Chaplin  <damon@ximian.com>

	* e-calendar-item.c: 
	* e-cell-date-edit.c: 
	* e-dateedit.c: added functions to set a callback to get the current
	time, which is used instead of localtime(). We need this as we have to
	use our own timezones.

2001-07-02  Jeffrey Stedfast  <fejj@ximian.com>

	* e-charset-picker.c (e_charset_picker_bonobo_ui_populate): Take a
	callback function and user_data so that we can add listeners to
	each of the menu items.

2001-07-02  Jeffrey Stedfast  <fejj@ximian.com>

	* Makefile.am: Updated to build e-charset-picker.c

	* e-charset-picker.[c,h]: Moved here from gal.
	(e_charset_picker_bonobo_ui_populate): New function to populate a
	bonobo-ui with a charset picker menu.

2001-06-14  Damon Chaplin  <damon@ximian.com>

	* e-map.[hc]: copied the EMap widget verbatim from Ximian Setup Tools.
	Hmm. Maybe it should go in gal, but its not a very general widget.
	
	* Makefile.am (INCLUDES): defined MAP_DIR for e-map.c.
	(libemiscwidgets_a_SOURCES): added e-map.[hc].

2001-05-31  Federico Mena Quintero  <federico@ximian.com>

	* e-dropdown-button.c (impl_button_press_event): Removed unused
	variable.

	* e-cell-date-edit.c (e_cell_date_edit_rebuild_time_list): Removed
	unused variable.

2001-05-07  Gediminas Paulauskas <menesis@delfi.lt>

	* misc/e-filter-bar.h: xgettext does not find N_() in #defines. So
	created fake enum. Also removed spaces before "..."

2001-04-24  Kjartan Maraas  <kmaraas@gnome.org>

	* e-calendar-item.c, e-calendar.c, e-cell-date-edit.c,
	e-clipped-label.c, e-dateedit.c, e-dropdown-button: 
	Added #include <glib.h> and moved corresponding local headers 
	to the top.
	
2001-04-15  Federico Mena Quintero  <federico@ximian.com>

	* e-search-bar.c (e_search_bar_get_option_choice): New function,
	because it is ridiculous to have to hunt down object arguments to
	fetch values.
	(e_search_bar_get_text): Likewise.
	(impl_get_arg): Use the functions above so that we have to
	maintain only one version of the getters.

2001-04-04  Kjartan Maraas  <kmaraas@gnome.org>

	* e-calendar.c: More header fixes.
	* e-cell-date-edit.c: Same.
	* e-dateedit.[ch]: Same.
	* e-title-bar.c: Same here.
	* e-search-bar.c: More header fixes.
	* test-calendar.c: Same here.
	
2001-03-29  Kjartan Maraas  <kmaraas@gnome.org>

	* e-dropdown-button.c: Replace #include <gtk/gtk.h>
	* e-dropdown-button.h: Remove #include <gnome.h>
	* e-filter-bar.c: Replace #include <gtk/gtk.h>
	* e-filter-bar.h: Replace #include <gtk/gtk.h>
	* e-messagebox.c: Add #includes to count for removed <gnome.h> in
	e-messagebox.h:
	* e-messagebox.h: Replace #include <gnome.h>
	* e-search-bar.c: Replace #include <gnome.h>
	* e-search-bar.h: Same here
	* test-calendar.c: Remove #include <gnome.h>
	* test-dateedit.c: Replace #include <gnome.h>
	* test-dropdown-button.c: Same here.
	* test-title-bar.c: Same here.

2001-03-22  Jeffrey Stedfast  <fejj@ximian.com>

	* e-filter-bar.c (rule_editor_clicked): Validate the filter rule.

2001-03-18  Damon Chaplin  <damon@ximian.com>

	* e-cell-date-edit.c (e_cell_date_edit_show_time_invalid_warning): 
	use gnome_dialog_run() to make the warning dialog modal. Also created
	a better warning message showing the format expected.
	Also used e_time_format_time() to format all times.

2001-03-15  Not Zed  <NotZed@Ximian.com>

	* e-filter-bar.c (menubar_activated): If we click on the edit
	menu, then bring up a rule editor.  If the user adds/removes rules
	though, they are neither saved, nor added to the menu's. sigh.

2001-03-04  Damon Chaplin  <damon@ximian.com>

	* e-cell-date-edit.c: pretty much working now.

2001-03-01  Not Zed  <NotZed@Ximian.com>

	* e-filter-bar.c: New type of search bar that interacts with
	filter contexts to save filters etc.  Still probably needs a
	little cleanpu.

2001-02-28  Not Zed  <NotZed@Ximian.com>

	* e-search-bar.c (add_dropdown): Save the dropdown menu in the
	struct too.  Sigh, this is only so we can scan its content later,
	ick.
	(e_search_bar_set_menu_sensitive): New function to se tthe
	sentisitivty of menyu items based on id.
	(find_id): New function to find the row and widget for a specific
	id.
	(add_option): Renamed to set_option.
	(add_dropdown): Renamed to set_dropdown.
	(add_dropdown): ?New function to add a single item.
	(set_dropdown): Call add_dropdown to add each item.
	(e_search_bar_add_menu): New public function to add a single item.

2001-02-27  Not Zed  <NotZed@Ximian.com>

	* Makefile.am (libemiscwidgets_a_SOURCES): Added filter-bar.[ch].

	* e-search-bar.c (class_init): Init virtual functions.
	(e_search_bar_set_option):
	(e_search_bar_set_menu): virtualise calling.
	(e_search_bar_construct): Call virtual functions to setup menus.

	* e-search-bar.h (struct _ESearchBarClass): Virtualise
	add_dropdown/add_option, so certain base options can be created.

2001-02-25  Damon Chaplin  <damon@ximian.com>

	* e-cell-date-edit.[hc]: new files to implement an ECell for showing
	and editing dates & times. (Unfinished)

	* Makefile.am (libemiscwidgets_a_SOURCES): added e-cell-date-edit.[hc]

2001-02-24  Not Zed  <NotZed@Ximian.com>

	* e-search-bar.c (add_dropdown): Move the event box into the
	esb->dropdown_holder.  Changed so it can be called again on the
	same esb, to rebuild the menu.
	(e_search_bar_set_menu): New function to (re)set the menu.
	(add_option): Setup so it can be re-called to rebuild the option
	list.
	(e_search_bar_set_option): New function to build the menu's.

2001-02-05  Jeffrey Stedfast  <fejj@ximian.com>

	* .cvsignore: Ignore test-dropdown-button

2001-01-28  Ettore Perazzoli  <ettore@ximian.com>

	* e-search-bar.c (add_spacer): Make the spacer 4 pixels wider.
	(add_dropdown): Put the dropdown button into an event box with a
	1-pixel border, so that we match the [Hardcoded! Stupid GTK+!]
	border around the option menu.

2001-01-28  Ettore Perazzoli  <ettore@ximian.com>

	* e-dropdown-button.c (menu_deactivate_cb): New function to change
	the state of the toggle button when the pop-up menu disappears.
	(impl_clicked): Removed.
	(impl_button_press_event): New, implementation for
	`::button_press_event'.  Pop-up the menu, and toggle the button.
	(class_init): Override `::button_press_event' with
	`impl_button_press_event'; don't override `::clicked' anymore.

	* e-dropdown-button.h, e-dropdown-button.c: Derive from
	`GtkToggleButton', instead of plain `GtkButton'.

2001-01-27  Ettore Perazzoli  <ettore@ximian.com>

	* e-search-bar.c (add_dropdown): Make the dropdown button
	non-focusable.

2001-01-27  Ettore Perazzoli  <ettore@ximian.com>

	* e-search-bar.c (e_search_bar_init): Don't create the widgets
	here.
	(e_search_bar_construct): New.  Do it here instead.
	(e_search_bar_new): Call it.  Added preconditions.
	(esb_pack_menubar): Removed.
	(add_dropdown): New.
	(add_option): New.
	(add_entry): New.
	(e_search_bar_construct): Use `add_dropdown()', `add_option()',
	`add_entry()'.
	(class_init): Renamed from `e_seearch_bar_class_init'.
	(init): Renamed from `e_search_bar_init'.
	(impl_destroy): Renamed from `e_search_bar_destroy'.
	(emit_menu_activated): Renamed from `esb_menu_activated'.
	(emit_query_changed): Renamed from `esb_query_changed'.
	(menubar_activated_cb): Renamed from `esb_menubar_activated'.
	(option_activated_cb): Renamed from `esb_option_activated'.
	(esb_entry_activated): Renamed from `esb_entry_activated'.
	(impl_set_arg): Renamed from `e_search_bar_set_arg'.
	(impl_get_arg): Renamed from `e_search_bar_get_arg'.

	* e-search-bar.h (struct _ESearchBar): Removed member `menubar';
	replaced it with `dropdown'.

2001-01-27  Ettore Perazzoli  <ettore@ximian.com>

	* e-dropdown-button.c (e_dropdown_button_construct): Removed
	@ui_info and @data args.  Obviously I am not very smart at this
	time of the night.
	(e_dropdown_button_new): Likewise.

2001-01-27  Ettore Perazzoli  <ettore@ximian.com>

	* e-dropdown-button.c, e-dropdown-button.h: New.

2001-01-25  Damon Chaplin  <damon@ximian.com>

	* e-calendar-item.[hc]: e_calendar_item_get_date_range() now returns
	a boolean, which is FALSE if no dates are currently shown.
	Plus a couple of minor sanity checks.

2001-01-19  Federico Mena Quintero  <federico@ximian.com>

	* e-calendar.c (e_calendar_init): Unset the GTK_CAN_FOCUS flag on
	the ECalendar.
	(e_calendar_focus_in): Removed function since it did nothing.
	(e_calendar_focus_out): Likewise.
	(e_calendar_key_press): Likewise.
	(e_calendar_init): Turn off the GTK_CAN_FOCUS flag for both arrow
	buttons.

2001-01-17  Federico Mena Quintero  <federico@ximian.com>

	* e-calendar-item.c (e_calendar_item_set_max_days_sel): Make zero
	the minimum number of days that can be specified.
	(e_calendar_item_set_arg): We do need an update when the maximum
	number of selected days is changed.
	(e_calendar_item_set_max_days_sel): Request an update of the
	canvas item.
	(e_calendar_item_button_press): Do not start selecting days if the
	max_days_selected is less than 1.

2001-01-17  Jeffrey Stedfast  <fejj@ximian.com>

	* e-messagebox.c (e_message_box_get_id): Oops. Delete this. I
	never meant for this to get commit'd.

2001-01-17  JP Rosevear  <jpr@ximian.com>

	* e-messagebox.c (e_message_box_get_id): Dont remove the function, give
	it the proper name

2001-01-17  Ettore Perazzoli  <ettore@ximian.com>

	* e-messagebox.c (e_message_box_get_checkbox): Remove the version
	returning `const char *' as of course it doesn't compile.  Please
	compile before committing.

2001-01-17  Jeffrey Stedfast  <fejj@ximian.com>

	* Makefile.am: Added e-messagebox to the build.

	* e-messagebox.[c,h]: Added a new messagebox window that contains
	a checkbox for "Don't show me this again."

2001-01-16  Jason Leach  <jasonleach@usa.net>

	* e-search-bar.[ch]: Moved here from $(toplevel)/filter.

2000-12-22  JP Rosevear  <jpr@helixcode.com>

	* e-calendar-item.h: add prototypes

	* e-calendar-item.c (e_calendar_item_init): Set max_days_selected to
	1 and days_to_start_week_selection to -1 as documented in header
	(e_calendar_item_set_arg): use new accessor methods
	(e_calendar_item_get_arg): ditto
	(e_calendar_item_get_max_days_sel): accessor
	(e_calendar_item_set_max_days_sel): ditto
	(e_calendar_item_get_days_start_week_sel): ditto
	(e_calendar_item_set_days_start_week_sel): ditto
	(e_calendar_item_class_init): add display_popup argument
	(e_calendar_item_init): initialize display_popup member
	(e_calendar_item_get_arg): get display_popup member
	(e_calendar_item_set_arg): set display_popup member
	(e_calendar_item_button_press): only show the popup menu if the
	member is set
	(e_calendar_item_get_display_popup): acessor
	(e_calendar_item_set_display_popup): ditto

2000-12-14  Federico Mena Quintero  <federico@helixcode.com>

	* e-dateedit.h: #include <time.h>

2000-12-08  JP Rosevear  <jpr@helixcode.com>

	* e-calendar.c (e_calendar_destroy): Call the parent class destroyer
	as well

2000-10-26  Damon Chaplin  <damon@helixcode.com>

	* e-dateedit.[hc]: updated to emit "changed" when appropriate, which
	turned out to be amazingly difficult :(
	Also added e_date_edit_get/set_date() to get/set just the date.
	Added e_date_edit_date_is_valid() & e_date_edit_time_is_valid() so
	you can check if the user has tried to enter an invalid date.
	(All the get_date/time functions return the last valid date entered.)

	* test-dateedit.c: updated a bit.

2000-11-02  Federico Mena Quintero  <federico@helixcode.com>

	* e-dateedit.h (EDateEditClass): Removed the "time_changed"
	signal, since it was never being emitted in the first place.  Time
	values *are* both date and time together anyways, so whenever one
	changes we should notify about the whole date/time value being
	changed.
	Renamed the remaining "date_changed" signal to just "changed".

	* e-dateedit.c (e_date_edit_class_init): Do not create the
	"time_changed" signal; rename the other one to "changed".
	(set_time): Moved the core functionality from
	e_date_edit_set_time() to here.  This function just sets the
	widgets' values without emitting any signals.
	(e_date_edit_set_time): Emit the "changed" signal unconditionally.
	This is to be consistent with the rest of the GTK+ widgets, and it
	actually makes writing client code easier.
	(e_date_edit_new): Use set_time().
	(on_date_popup_now_button_clicked): Do not emit the signal here.
	(on_date_popup_none_button_clicked): Likewise.
	(e_date_edit_set_time_of_day): Emit the signal, since we do not
	call e_date_edit_set_time().

2000-10-30  Kjartan Maraas  <kmaraas@gnome.org>

	* e-calendar-item.c: #include <string.h> to get rid of warning.
	* e-clipped-label.c: Same here.
	
2000-10-27  Federico Mena Quintero  <federico@helixcode.com>

	* e-dateedit.c (e_date_edit_destroy): Do not unref the cal_popup
	since we already destroyed it.

2000-10-11  Damon Chaplin  <damon@helixcode.com>

	* e-calendar-item.c (e_calendar_item_recalc_sizes): fixed to
	recalculate min_cell_width/height in case the show_week_numbers option
	is changed.

	* e-dateedit.c: added support for hiding the date field, and added
	get/set_time_of_day() functions to get/set just the time.

2000-09-30  Damon Chaplin  <damon@helixcode.com>

	* e-calendar-item.c: 
	* e-dateedit.c: better i18n of strftime strings.

2000-09-29  Ettore Perazzoli  <ettore@helixcode.com>

	* e-title-bar.c: New member `pin_gtk_pixmap' in
	`ETitleBarPrivate'.  Signal "close_button_clicked" renamed to
	"button_clicked".  Signal "title_button_press_event" renamed to
	"label_button_press_event".
	(init): Init new members.
	(close_button_realize_cb): Create the pin pixmap.  Call
	`show_and_hide_pixmaps_according_to_mode()'.
	(e_title_bar_show_close_button): Renamed to
	`e_title_bar_show_button'.
	(e_title_bar_get_button_mode): New.
	(e_title_bar_set_button_mode): New.

2000-09-23  Damon Chaplin  <damon@helixcode.com>

	* e-calendar.c: use pixmaps instead of GtkArrows to look better.
	Also set the canvas window's background when realized so that we can
	set the button reliefs to none.

2000-09-22  Damon Chaplin  <damon@helixcode.com>

	* test-dateedit.c: updated a bit, adding a few EDateEdits with
	different options.

	* e-calendar-item.c (e_calendar_item_set_selection): aborted any
	current selection operation and initialize all of the selection fields.
	(e_calendar_item_unmap): new function to abort any current selection
	operation. Otherwise GnomeCanvas gets in a muddle about grabs.

	* e-dateedit.c: marked some strftime()/strptime() format strings for
	translation and used "%m/%d/%Y" instead of "%x" so we get the complete
	year number. Also changed e_date_edit_get_time() so it returns -2 if
	it can't parse the date or time, and -1 if it is explicitly set to
	None.
	(e_date_edit_parse_date): new function to parse the date string and
	add on the current century if a year of 0-99 is entered.

2000-09-21  Damon Chaplin  <damon@helixcode.com>

	* e-dateedit.c (on_date_button_clicked): only check return of strptime
	for NULL. It should now select the correct day set in the popup.

	* e-calendar.c: 
	* e-calendar-item.c: 
	* test-calendar.c: removed support for buttons within the ECalendar.
	It is cleaner to add them outside it, as EDateEdit does.

2000-09-18  Dan Winship  <danw@helixcode.com>

	* e-dateedit.c (_XOPEN_SOURCE): set this to 4 to specify how much
	X/Open we want with that.

2000-09-18  Christopher James Lahey  <clahey@helixcode.com>

	* Makefile.am: Added $(EXTRA_GNOME_CFLAGS) and
	$(EXTRA_GNOME_LIBS).  Removed unneeded libraries.

	* e-calendar-item.c, e-calendar.c, e-calendar.h, e-title-bar.c:
	Fixed the #include lines to deal properly with gal.

	* e-scroll-frame.c, e-scroll-frame.h: Moved to gal.

2000-09-11  Damon Chaplin  <damon@helixcode.com>

	* Makefile.am (libemiscwidgets_a_SOURCES): added e-dateedit.[hc]
	and the test-dateedit app.

	* e-dateedit.[hc]: new widget to use instead of GnomeDateEdit. It
	uses the new ECalendar widget for the calendar and also supports
	"None", "Today" and "Now" buttons, and goes away with a single click.

	* test-dateedit.c: app to test the EDateEdit widget.

	* e-calendar-item.c: updated to support the EDateEdit better,
	mainly by adding the "move_selection_when_moving" arg so we can turn
	it off to keep the same day selected when changing the months shown.

2000-09-05  Damon Chaplin  <damon@helixcode.com>

	* e-calendar-item.c (e_calendar_item_draw_month): make sure we get
	the start_weekday since we need it for draw_days(). Fixes a drawing
	bug.

2000-08-31  Damon Chaplin  <damon@helixcode.com>

	* e-calendar-item.c (e_calendar_item_button_press): 
	(e_calendar_item_button_release): grab/ungrab the pointer so we
	always get the button_release event.

2000-08-30  Damon Chaplin  <damon@helixcode.com>

	* e-calendar-item.[hc]: 
	* e-calendar.[hc]: Updated.

2000-08-10  Christopher James Lahey  <clahey@helixcode.com>

	* e-calendar-item.c, e-calendar.c: Fixed some warnings.

2000-07-25  Damon Chaplin  <damon@helixcode.com>

	* e-calendar-item.h: 
	* e-calendar.[hc]: new widget and canvas item to replace GtkCalendar.
	Not quite finished yet.

2000-07-21  Ettore Perazzoli  <ettore@helixcode.com>

	* e-title-bar.c (e_title_bar_set_title): We have a `EClippedLabel',
	not a `GtkLabel' here: use the right function to change the text.

2000-07-12  Christopher James Lahey  <clahey@helixcode.com>

	* e-scroll-frame.c: Tried rearranging the casts to try for a more
	correct computation.

2000-07-08  Dan Winship  <danw@helixcode.com>

	* e-scroll-frame.c (e_scroll_frame_add): comment out true but
	confused warning about non-scrollable widgets until Chris and/or
	Federico fix this correctly.
	(e_scroll_frame_size_allocate): If the available space for the
	child is less than the width/height of the frame, give the child
	an allocation of 0 rather than some small negative number cast to
	unsigned.

2000-07-05  Dan Winship  <danw@helixcode.com>

	* Makefile.am (INCLUDES): Set G_LOG_DOMAIN=__FILE__ rather than
	"e-title-bar" in all three widgets.

2000-06-13  Anders Carlsson  <andersca@gnu.org>

	* e-scroll-frame.c (e_scroll_frame_button_press): Control does 
	horizontal scrolling, a la gimp.

2000-06-11  Anders Carlsson  <andersca@gnu.org>

	* e-scroll-frame.c (e_scroll_frame_button_press): Add support
	for mouse wheel scrolling in EScrollFrame.

2000-06-10  Ettore Perazzoli  <ettore@helixcode.com>

	* e-title-bar.c (close_button_realize_cb): Unref the pixmap and
	the mask.

