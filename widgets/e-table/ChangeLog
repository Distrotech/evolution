2000-05-04  Christopher James Lahey  <clahey@helixcode.com>

	* e-table-sorted-variable.c: Replace insert sort completely with a
	qsort.

2000-05-04  Christopher James Lahey  <clahey@helixcode.com>

	* e-table-sorted-variable.c: Changed the insert sort to be binary
	instead of linear.
	
2000-05-02  Matt Loper  <matt@helixcode.com>

	* Makefile.am: set G_LOG_DOMAIN.

2000-04-30  Christopher James Lahey  <clahey@helixcode.com>

	* e-table-header-item.c: Made this more reentrant.

	* e-table-sorted-variable.c, e-table-sorted-variable.h: Does a
	proper resort when the sorting info changes.

	* e-table.c, e-table.h: Made it so that ETable doesn't destroy and
	recreate the entire table when sorting info changes.

2000-04-27  Christopher James Lahey  <clahey@helixcode.com>

	* arrow-down.xpm, arrow-up.xpm, e-cell-text.c, e-cell-toggle.c,
	e-table-col.c, e-table-config.c, e-table-header-item.c: Fixed some
	warnings.

2000-04-26  Christopher James Lahey  <clahey@helixcode.com>

	* e-table-header-item.c: Added a missing include.

2000-04-24  Miguel de Icaza  <miguel@helixcode.com>

	* e-table.c (e_table_class_init): Add argument handling here.

	* e-table-group-leaf.c (e_table_group_apply_to_leafs): New method.
	Enables us to walk all the children of an ETableGroup.

	* e-table.c (et_get_arg, et_set_arg): Implement ::get and ::set
	methods.
	(e_table_construct_from_spec_file): Now we return the etable.
	(e_table_construct): ditto.
	(et_real_construct): Now we return the ETable.  Returns NULL on
	construct failure. 
	(e_table_new): ditto.
	(e_table_new_from_spec_file): ditto.

	* (et_build_grouping_spec): Removed vestige code that still
	contained references to the etable->specification XML code.

	Dumped all the ifdefed out code. 
	
	* e-table.h: Removed ETable->specification finally.
	
2000-04-25  Christopher James Lahey  <clahey@helixcode.com>

	* e-table-size-test.c: Fixed a warning.

	* e-table-item.c: Removed the unnecessary gnome_canvas_update_bbox.

2000-04-24  Christopher James Lahey  <clahey@helixcode.com>

	* e-table.c: Fixed some warnings.

2000-04-23  Iain Holmes  <ih@csd.abdn.ac.uk>

	* e-table-item.c (eti_bounds): Calculate the width of the table from the
	width of all the columns, and update the eti->width field as appropiate.
	(eti_update): Update the bbox.

2000-04-17  Chris Toshok  <toshok@helixcode.com>

	* Makefile.am (noinst_PROGRAMS): add table-size-test
	
	* .cvsignore: add table-size-test.

	* e-cell-text.c (ect_ecent): use e_table_model_is_cell_editable
	instead of E_CELL_EDITABLE.

	* e-cell-toggle.c (etog_event): same.

	* e-cell.c (e_cell_init): don't call e_cell_set_editable.  that
	info comes from the model.
	(e_cell_set_editable): removed function.

	* e-cell.h: remove the E_CELL_EDITABLE flag.  that should be
	retrieved from the model.  also, remove the prototype for
	e_cell_set_editable.

	* e-table-size-test.c: new file, for a stress test of sorts, of a
	large, uneditable e-table.

2000-04-16  Anders Carlsson  <andersca@gnu.org>

	* e-table-item.c (eti_event): Propagate mouse wheel events upwards.

	* e-table.c (et_real_construct): Use a GtkScrolledWindow here 
	instead of a GtkScrollbar, since it makes mouse wheel scrolling 
	much easier.

2000-04-15  Matt Loper  <matt@helixcode.com>

	* e-table.c (et_xml_to_header): sanity-check our parameters.
	(et_grouping_xml_to_sort_info): same.
	(et_real_construct): Bail if we couldn't get the children we
	wanted.

2000-04-14  Christopher James Lahey  <clahey@helixcode.com>

	* e-table-item.c, e-table-item.h: Added a row height cache.

2000-04-15  Ettore Perazzoli  <ettore@helixcode.com>

	* e-table.c (e_table_construct): Use `strlen (copy)' instead of
	`strlen (copy) + 1' as the size argument for `xmlParseMemory()'.

2000-04-14  Miguel de Icaza  <miguel@gnu.org>

	* e-table.c, e-table.h: Switch the parent object to be a GtkTable.
	(et_real_construct): apply massaging and some loving action to
	make the thing behave as a GtkTable.
	(e_table_init): More love.

2000-04-12  Miguel de Icaza  <miguel@gnu.org>

	* e-table-header-item.c (ethi_drag_motion): Remove test for
	source.  We will fix this later.
	
	(ethi_end_resize): Reset resize_guide here.

2000-04-11  Miguel de Icaza  <miguel@helixcode.com>

	* e-table-header-item.c (ethi_add_destroy_marker): Add group
	indent width here.
	(is_pointer_on_division): Use the group indent here, so the
	resize pointer is shown at the correct time.
	(TOLERANCE): Bump it up to 3
	(draw_button): Do not paint an arrow if there is an icon present,
	and not enough space to paint.

2000-04-10  Miguel de Icaza  <miguel@helixcode.com>

	* e-table-header-item.c (make_shapped_window_from_xpm): New
	routine, creates a shapped mask window from an xpm buffer.
	(ethi_add_drop_marker): New version, uses shaped windows instead
	of canvas items to signal the drop location.
	(ethi_maybe_start_drag): Disable dragging if there is only one
	column left.

2000-04-10  Miguel de Icaza  <miguel@gnu.org>

	* e-table-header-item.c (ethi_drag_motion): Drop frozen count
	support from here. 
	(ethi_start_drag): ditto.

	* e-table-header.h: Kill frozen_count.

2000-04-09  Matt Loper  <matt@helixcode.com>

	* e-table-col.c (e_table_col_new_with_pixbuf): ref etc->ecell,
	like in e_table_col_new, since that same ECell is unref'd in
	etc_destroy().

2000-04-08  Christopher James Lahey  <clahey@helixcode.com>

	* e-table.c: Separated some functions into an xml bit and a
	generic bit.

2000-04-06  Christopher James Lahey  <clahey@helixcode.com>

	* test-cols.c, test-table.c: Got rid of some warnings.

	* e-table-group-container.c, e-table-group-container.h,
	e-table-group-leaf.c, e-table-group-leaf.h, e-table-group.c,
	e-table-group.h, e-table-header-item.c, e-table-header-item.h,
	e-table-sort-info.c, e-table-sort-info.h,
	e-table-sorted-variable.c, e-table-sorted-variable.h, e-table.c,
	e-table.h: Changed ETableSortInfo to not use xml internally.
	
2000-04-06  Miguel de Icaza  <miguel@gnu.org>

	* e-cell-text.c: Killed ARG_EDITABLE.
	(ect_event): Updated to new editable setup.
	(e_cell_text_new): Kill editable argument.

	* e-cell-toggle.c (etog_event): Handle editability here

	* e-cell-text.h: Removed editable bit field from here, it is now
	taken care at the e-cell level.

	* e-cell.c (e_cell_set_editable): New function.  
	(e_cell_init): Set editable to TRUE by default.

	* test-check.c (check_test): update to new api

	* test-table.c (table_browser_test): ditto.
	(do_e_table_demo): ditto.

	* test-cols.c (multi_cols_test): ditto

2000-04-02  Miguel de Icaza  <miguel@gnu.org>

	* e-table-sort-info.c (e_table_sort_info_class_init): Kill
	argument.  Do not use XML internally
	(e_table_sort_info_set_sorting): New function, use this to set the
	sorting.
	(e_table_sort_info_set_grouping): This one to do the grouping/.

2000-04-01  Miguel de Icaza  <miguel@gnu.org>

	* e-table.c (e_table_build_column_spec): Drop frozen support.
	(e_table_make_header): Drop frozen support.

	* e-table-header.c (e_table_header_new): Drop frozen support.

	* e-table-header-item.c (ethi_drag_motion): Drop frozen support.
	(ethi_drag_drop): Drop frozen support.
	(ethi_start_drag): Drop frozen support.

	* e-table.c (e_table_construct_from_spec_file): Robustify: support
	the case in which the XML could not be parsed;  Propagate errors.
	(e_table_new): Handle failure.
	(e_table_new_from_spec_file): ditto.
	Renamed multiple internal functions whose prefix was et_ to be e_table_

2000-03-31  Miguel de Icaza  <miguel@gnu.org>

	* e-table-simple.h: Constify this.

2000-04-04  Christopher James Lahey  <clahey@helixcode.com>

	* e-table-text-model.c: Make this assert a bit more readable.

	* e-table-item.c: Fix update loop behavior.

2000-03-30  Miguel de Icaza  <miguel@gnu.org>

	* Makefile.am (EXTRA_DIST): Added Glade files to the
	distribution. 

2000-03-28  Matt Loper  <matt@helixcode.com>

	* e-table-text-model.c (e_table_text_model_destroy): made
	assertion more accurate.

2000-03-27  Michael Meeks  <michael@helixcode.com>

	* e-table-item.c (eti_update): try and fix the convoluted logic.
	(eti_bounds): Implement; should fix the re-draw bugs.

	* e-table-group-container.c: kill many redundant prototypes,
	stylistic cleans.

2000-03-26  Matias Mutchinick <matias@seul.org>

	* e-cell-toggle.c (etog_draw): Removed extra code that computed
	bogus width.  This was the actual source of the problem with the
	miss-rendering feature.

2000-03-26  Miguel de Icaza  <miguel@gnu.org>

	* e-table-header-item.c (ethi_realize): Remove warning from here.

	* test-table.c (table_browser_test): Use ECanvas, not GnomeCanvas,
	to support reflow.
	* test-cols.c (multi_cols_test): ditto
	* e-table.c (e_table_setup_header): ditto

	* e-table-header-item.c (ethi_font_load): Replace font.
	(ethi_realize): ditto.

2000-03-22  Matt Loper  <matt@helixcode.com>

	* e-table-text-model.c (e_table_text_model_destroy): Added some
	assertions.

2000-03-21  Christopher James Lahey  <clahey@helixcode.com>

	* e-table.c: Make rectangles resize properly when receiving the
	"model_changed" signal.

2000-03-20  Christopher James Lahey  <clahey@helixcode.com>

	* e-table-group-container.c, e-table-group-container.h,
	e-table-group-leaf.c, e-table-group.c, e-table-group.h: Updated
	these to use the new ECanvas reflow infrastructure.

	* e-table-item.c, e-table-item.h: Updated these to use the new
	ECanvas reflow infrastructure.  Fixed the bounding box.
	
	* e-table.c, e-table.h: Made the header have no extra space around it.

2000-03-19  Christopher James Lahey  <clahey@helixcode.com>

	* e-table-header.c: Fixed a crashing bug when you close an
	ETable.

2000-03-13  Christopher James Lahey  <clahey@helixcode.com>

	* e-cell-text.c: Fixed a crashing bug when you cancel an edit.

2000-03-12  Christopher James Lahey  <clahey@helixcode.com>

	* e-table.c: Made this use an ECanvas.  Fixed a bug where
	e_table_new_from_spec_file was calling e_table_construct instead
	of e_table_construct_from_spec_file.

	* e-table-item.c, e-table-header-item.c, e-table-column-item.c:
	Switched these to use GTK_TYPE_OBJECT and GTK_VALUE_OBJECT instead
	of GTK_TYPE_POINTER and GTK_TYPE_OBJECT.

	* e-cell-text.c: Got rid of a crashing bug.

	* e-table-text-model.c, e-table-text-model.h: A new object which
	is an e-text-model which uses an e-table-model for its data.

	* Makefile.am: Added e-table-text-model.c and
	e-table-text-model.h.

	* .cvsignore: Added table-example-1 and table-example-2.

2000-03-08  Christopher James Lahey  <clahey@helixcode.com>

	* e-table.c: Changed the destroy function to disconnect from
	signals before unrefing the objects the sinnals are on.  Changed
	the destroy function to match the objects and signal ids properly
	in its disconnect section.
	
	* e-table-item.c, e-table-item.h: Changed this to do follow the
	canvas rules better.

	* e-table-header-item.c, e-table-header-item.h: Made
	ETableHeaderItem connect to the "sort_info_changed" on its
	ETableSortInfo instead of just manually redrawing itself.  Fixed
	the update function a bit to follow the canvas rules a bit better.

2000-03-06  Christopher James Lahey  <clahey@helixcode.com>

	* e-table-item.c: Made rows get unselected when switching from one
	group to the next.

2000-03-06  Christopher James Lahey  <clahey@helixcode.com>

	* e-table-group-container.c: Use the style's font if lucidasans-10
	is not found.

2000-03-06  Christopher James Lahey  <clahey@helixcode.com>

	* e-table-header-item.c, e-table-header-item.h: Made it so that
	columns would be properly indented.

2000-03-06  Christopher James Lahey  <clahey@helixcode.com>

	* e-table-sorted-variable.c: Have identical values get sorted by
	their actual row.

2000-03-06  Christopher James Lahey  <clahey@helixcode.com>

	* e-cell-text.c: Draw selected row.

2000-03-06  Christopher James Lahey  <clahey@helixcode.com>

	* e-table.c, e-table.h: Add a "row_selection" signal.

	* test-table.c: Test the new "row_selection" signal.

	* e-table-group-container.c, e-table-group-leaf.c: Implement the
	"row_selection" property properly.

	* e-table-group.c, e-table-group.h: Add a "row_selection" signal.

2000-03-05  Christopher James Lahey  <clahey@helixcode.com>

	* e-table.c, e-table.h: Added support for the sorting info.  The
	Etable creates a sort_info object, and then connects to the
	signals to rearrange the rows when the sort_info changes.  It also
	passes the info object to the ETableHeaderItem.

	* e-table-model.c: Fixed a typo where ETableModel was written as
	ETableModle.

	* e-table-header.c, e-table-header.h: Added some code for sorting
	here, but it's not used.  I don't think we want this code, but I
	wanted to check it in at least once so that it's not lost.

	* e-table-header-item.c, e-table-header-item.h: Added a
	"sort_info" argument to ETableHeaderItem.  Added display of
	current sort settings.  Added support for clicking to change the
	sort settings.

	* e-table-col.h: E_TABLE_COL_ARROW_NONE is marked as being = 0
	since this is required in other places.  (I think C defines this
	as being the case, but it's good to have the = 0 there so that
	it's obvious that it has to be first.)

	* TODO: Mark sorting as done.

	* e-table-sort-info.c, e-table-sort-info.h: New files for
	containing the xml grouping/sorting information and for sending
	signals on that information.
	
	* Makefile.am: Added e-table-sort-info.c and e-table-sort-info.h.

2000-03-04  Christopher James Lahey  <clahey@helixcode.com>

	* e-table.c: Added saving of frozen_columns count.  Added a
	vertical scrollbar to ETable.

2000-03-04  Christopher James Lahey  <clahey@helixcode.com>

	* e-table.c: Push the proper visual and colormap for ETable to work.

2000-03-04  Christopher James Lahey  <clahey@helixcode.com>

	* TODO: Touched this up a bit.

	* e-table-group.c, e-table-group-leaf.c: Check for NULL before
	calling gtk_object_unref or gtk_object_destroy.

2000-03-04  Christopher James Lahey  <clahey@helixcode.com>

	* e-table.c: Fixed a crash error.

2000-03-04  Christopher James Lahey  <clahey@helixcode.com>

	* e-table-item.c: Fixed a compile warning.

	* e-table.c: Fixed a crash error.

2000-03-04  Christopher James Lahey  <clahey@helixcode.com>

	* TODO: Added a bunch of stuff to the TODO list.  Put +s before a
	few of the items that are finished.

	* test-table.c: Add a button to save the spec file.

	* e-table.c, e-table.h: Add loading configurations from files as
	well as the ability to get the current configuration out of the
	widget.

2000-03-03  Christopher James Lahey  <clahey@helixcode.com>

	* e-table.c: Removed some unused code.

	* e-table-header-item.c, e-table-header-item.h: Removed the unused
	normal_cursor variable and object.

	* e-table-col.c: Maintain a reference count in the contained ECell.

2000-03-01  Ettore Perazzoli  <ettore@helixcode.com>

	* Makefile.am: Use `libeutil.la', not `libeutil.a'.

2000-02-29  Christopher James Lahey  <clahey@helixcode.com>

	* test-table.c: Test frozen columns

	* e-table.c: Make frozen columns available through the xml file.

	* e-table-header.c, e-table-header.h, e-table-header-item.c: Added
	frozen columns API to let you specify some number of leading
	columns as undraggable.

	* Makefile.am: Add e-table-example-1.c and e-table-example-2.c.

	* e-table-example-1.c, e-table-example-2.c: New files.  A couple
	of examples of ETable use.

2000-02-28  NotZed  <NotZed@HelixCode.com>

	* Makefile.am (table_test_LDADD): Fixed references to eutil.

2000-02-28  Christopher James Lahey  <clahey@helixcode.com>

	* e-table-header-item.c, e-table-header.c: Fixed a couple of crash
	bugs.

2000-02-25  Christopher James Lahey  <clahey@helixcode.com>

	* e-table-item.c: Made the E table item redraw properly.

	* e-table-group-container.c: Added handling to distinguish between
	n items and 1 item.  Got rid of a crash due to an abandoned timeout
	callback.

2000-02-24  Christopher James Lahey  <clahey@helixcode.com>

	* e-cell-text.c: Made carriage return stop editting instead of
	inserting a carriage return.

2000-02-24  Christopher James Lahey  <clahey@helixcode.com>

	* test-table.c: Added duplicate_value and add_value.  Use the new
	compare functions.  Made it so we only create one model to better
	test model view stuff.  Changed the test to not have as many
	extra, useless, columns.

	* test-cols.c, test-check.c: Added duplicate_value and add_value.
	Use the new compare functions.

	* e-table.c, e-table.h: Use all the new features of e-table-groups
	(sorting and grouping).  Handle on the fly reorganization of
	groups in an idle loop.  Compare functions now are to return -1 if
	the first item is greater, 0 if they are equal, or 1 if the second
	item is greater.

	* e-table-subset.c, e-table-subset.h: Made e-table-subset
	disconnect properly from its signals when it dies.

	* e-table-subset-variable.c, e-table-subset-variable.h:
	Virtualized the add and remove commands so that
	e_table_sorted_variable could override the add command to do
	sorting.

	* e-table-sorted.c: Fixed this to inherit properly from
	ETableSubset.

	* e-table-simple.h, e-table-simple.c: Added handling of
	duplicate_value and free_value;

	* e-table-model.c, e-table-model.h: Added duplicate_value and
	free_value for memory allocation of table elements outside the
	table.

	* e-table-item.c: Fixed a crashing bug.

	* e-table-group.c: Added sorting.  Fixed destruction to delete the
	right things.

	* e-table-group-leaf.c, e-table-group-leaf.h: Pass column and sort
	order information into the e_table_sorted_variable.  Properly
	destroy things when deleted.

	* e-table-group-container.c, e-table-group-container.h: Properly
	handle the list of subgroups.  Handle proper sorting and grouping
	of subgroups.

	* e-table-sorted-variable.c, e-table-sorted-variable.h: Files to
	do a sorted model that stays sorted as you add and remove rows.

	* Makefile.am: Added e-table-sorted-variable.c and
	e-table-sorted-variable.h.

2000-02-24  Christopher James Lahey  <clahey@helixcode.com>

	* e-table-item.c: Made keyboard focus navigation work across
	groups.

	* e-table-header.c: Made e_table_header_col_diff not crash if you
	give it a column less than 0 (it truncates negative column values
	to 0.)

	* e-table-group.c, e-table-group.h: Added e_table_group_get_header
	to get the ETableHeader for this ETableGroup.

	* e-table-group-container.c: Made shift tab work.

2000-02-24  Christopher James Lahey  <clahey@helixcode.com>

	* e-table-item.c: Made changing focus work.

2000-02-24  Christopher James Lahey  <clahey@helixcode.com>

	* e-table-subset-variable.c, e-table-subset-variable.h: A new
	model which is a subset, but you can add and remove rows.

	* test-table.c: Added a thaw method for use with the
	e-table-subset (emits model_changed.)  Adapted to the changes to
	e_table_item.  Properly parse headers.  Adapted to the changes to
	e_table, including creating example xml spec data.

	* test-cols.c, test-check.c: Added a thaw method for use with the
	e-table-subset (emits model_changed.)  Adapted to the changes to
	e_table_item.

	* e-table.c, e-table.h: Reworked e-table to use the ETable
	grouping system.  The only difference for the interface is that
	instead of passing in a column_spec and a grouping_spec, you pass
	in a single string that is an xml format that includes both pieces
	of information.

	* e-table-subset.h: Added rules for emacs to do correct
	indentation.

	* e-table-subset.c: Implemented freezing.  No signals are emitted
	while frozen and "model_changed" is emitted when thawed.

	* e-table-sorted.h: ETableSortedClass has ETableSubset as its
	parent object instead of ETableSubsetClass.  Fixed this.

	* e-table-simple.c, e-table-simple.h: Implemented the thaw method.
	Use of simple now requires an extra argument (the thaw method.)

	* e-table-model.h, e-table-model.c: Added e_table_model_freeze and
	e_table_model_thaw.

	* e-table-item.h, e-table-item.c: Reworked this a bit to make it
	provide some things the new group system needed and to make
	inter-item keyboard focus work.  Changed the external interface
	only in the list of arguments it recognizes and signals it emits.
	Instead of "x" and "y", you have to use
	e_canvas_item_move_absolute and instead of emitting a
	"height_changed" signal, it emits a "resize" signal.  There's new
	"has_focus", "width", and "height" arguments and a function to get
	the currently focused column.

	* e-table-header-item.c: Got rid of some warnings here.  Changed
	the 

	* e-table-group-leaf.h, e-table-group-leaf.c,
	e-table-group-container.h, e-table-group-container.c: New types to
	make e_table_group work properly.

	* e-table-group.h, e-table-group.c: Completely reworked e-table
	grouping.  e-table-group now uses a hierarchical structure.

	* e-cell.h: Added e_cell_print.  This doesn't work yet.

	* e-cell.c: Made e_cell_realize exist.  (It was improperly named
	e_cell_view_realize in the .c.)

	* e-cell-text.c: Made the blinking cursor disappear properly.

	* check-filled.xpm, check-empty.xpm: Made these const char *[]
	instead of char *[] to avoid compiler warnings.

	* Makefile.am: Added e-table-group-container.c,
	e-table-group-container.h, e-table-group-leaf.c,
	e-table-group-leaf.h, e-table-subset-variable.c,
	e-table-subset-variable.h.

2000-02-18  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* e-table-header.c: Include <string.h>

	* Makefile.am (INCLUDES): Add EXTRA_GNOME_CFLAGS to INCLUDES>

2000-02-12  Iain Holmes  <ih@csd.abdn.ac.uk>

	* e-table-header-item.c (ethi_drag_motion): Check the ethi is actually
	the one being dragged. Prevents crashes when trying to drag headeritems
	and there are multiple headeritems on the same canvas.
	(ethi_drag_end): Same.
	(ethi_drag_drop): Same.
	(ethi_drag_leave): Same.

2000-02-11  Christopher James Lahey  <clahey@helixcode.com>

	* test-check.c: Added test of sort arrows.

	* e-table-col.h, e-table-col.c: Added sort arrows for column
	headers (It doesn't actually sort.  It just displays the arrows.)

	* e-table-header-item.c: Added display of arrows.

2000-02-11  Christopher James Lahey  <clahey@helixcode.com>

	* clip.png: Test column header image.

	* test-check.c: Test pixbuf column headers.

	* e-table-col.h, e-table-col.c: Added pixbufs for column headers.

	* e-table-header-item.c (draw_button): Draw pixbuf column headers properly.

2000-02-11  Christopher James Lahey  <clahey@helixcode.com>

	* e-cell-text.h, e-cell-text.c: Add an editable argument to
	e_cell_text_new.

	* test-table.c, test-cols.c, test-check.c: Set the editable
	argument to e_cell_text_new.

2000-02-11  Christopher James Lahey  <clahey@helixcode.com>

	* e-table-header-item.h, e-table-header-item.c: Added reordering
	of columns.

	* e-table-header.c: Fixed a couple of bugs in the move column and
	remove column functions.

2000-02-11  Christopher James Lahey  <clahey@helixcode.com>

	* e-cell-text.c: Made space around text look right.  Added a
	blinking cursor.

2000-02-11  Miguel de Icaza  <miguel@gnu.org>

	* e-table-item.c (eti_header_structure_changed): Add nice
	assertion. 

2000-02-10  Christopher James Lahey  <clahey@helixcode.com>

	* e-cell-text.c: Handle button releases properly.

	* e-table-header-item.c (ethi_start_drag): Added a drag icon.

2000-02-09  Christopher James Lahey  <clahey@helixcode.com>

	* e-cell-text.c: Tweaked e-cell-text.  Added a white background
	and tweaked the borders.

2000-02-09  Christopher James Lahey  <clahey@helixcode.com>

	* Makefile.am: Changes where e-text is included from.

2000-02-07  Christopher James Lahey  <clahey@helixcode.com>

	* e-table-item.c (eti_event): Fixed some motion event
	bugs. (incorrect x and y.)

	* Makefile.am: Added includes for dependencies in
	evolution/widgets/libevolutionwidgets.a

	* e-cell-text.h, e-cell-text.c: Completely revamped using code
	from e-text.c and e-text.h.

2000-02-07  Miguel de Icaza  <miguel@gnu.org>

	* e-table.c (e_table_setup_table): Setup the scroll region of the
	table canvas on size allocation.
	(e_table_canvas_realize): Do not set the scrollregion here.
	(e_table_canvas_init): Move root initialization here.

2000-01-30  Miguel de Icaza  <miguel@gnu.org>

	* e-table-simple.c (e_table_simple_new): Add data field back in.

1999-12-30  Miguel de Icaza  <miguel@gnu.org>

	* e-table-item.c (eti_attach_cell_views): New routine, creates the
	cell views.
	(eti_detach_cell_views): Detaches the cell_views from the
	ETableItem.
	(eti_realize_cell_views, eti_unrealize_cell_views): Simplified to
	just do realize/unrealize notification.
	(eti_add_table_model): Only attach the cells when we have both the
	table model and the header model.

	* e-cell.h (ECellClass): Added two new methods: new_view and
	kill_view which drive the view process (instead of putting that on
	realize/unrealize). 

	* e-cell.c: Adapt the code to use the new scheme for view
	instantiation.

	* e-cell-text.c, e-cell-toggle.c: Adapted to the new class
	changes.
	
1999-12-22  Miguel de Icaza  <miguel@helixcode.com>

	* e-table-item.c (e_table_item_focus): grab focus here with the
	canvas method.

1999-12-20  Miguel de Icaza  <miguel@helixcode.com>

	* e-table-group.c (etg_update): Change the dimensions only if the
	child changes its own.

	* e-table-item.c (eti_table_model_changed): Emit new signal on
	table height change.
	(eti_class_init): Register new "height_change" signal.

1999-12-19  Damon Chaplin  <damon@karuna.freeserve.co.uk>

	* Makefile.am (SUBDIRS): created SUBDIRS with meeting-time-sel.

	* meeting-time-sel/Makefile.am: 
	* meeting-time-sel/.cvsignore: 
	* meeting-time-sel/e-meeting-time-sel.h: 
	* meeting-time-sel/e-meeting-time-sel.c: 
	* meeting-time-sel/e-meeting-time-sel-item.h: 
	* meeting-time-sel/e-meeting-time-sel-item.c: 
	* meeting-time-sel/e-meeting-time-sel-list-item.h: 
	* meeting-time-sel/e-meeting-time-sel-list-item.c: 
	* meeting-time-sel/e-meeting-time-sel-mail.xpm: 
	* meeting-time-sel/e-meeting-time-sel-no-mail.xpm: 
	* meeting-time-sel/test-meeting-time-sel.c: new files implementing
	the meeting time selector.

1999-12-12  Miguel de Icaza  <miguel@helixcode.com>

	* e-table-item.c (eti_class_init): X and Y arguments are now
	doubles (to make it consistent with the rest of the canvas x, y
	arguments). 

	* e-table.c (e_table_create_leaf): Use new argument values here 

	* test-*.c: Update to new argument types for x and y

	* e-table-group.c: New implementation as a canvas item used to
	group childs. 

	* e-table-item.c (eti_update): Make this play nicely with groups.
	(eti_draw): ditto.
	(eti_request_region_redraw): ditto.
	(eti_item_region_redraw): New function.

	* e-table-subset.c (etss_proxy_model_row_changed): Added model
	proxying.

	* e-cell.h: Drop ETableModel from the ECell;  
	(realize): Now takes an ETableModel
	
	* e-cell-checkbox.c: Adapted to new class
	changes; 
	* e-cell-toggle.c: ditto

	* e-table-subset.c (etss_row_count): Fix this guy.

1999-12-11  Miguel de Icaza  <miguel@helixcode.com>

	* e-table-item.c (eti_unrealize_cell_views): Null the cell views.
	(eti_header_structure_changed): Only unrealize/realize if we were
	realized before.

	* e-table-header.c (e_table_header_add_column): Allow -1 as an
	insert position

1999-12-11   Miguel de Icaza <miguel@helixcode.com>

	* e-table.c: Massive fixage.

	* test-table.c: Updates to test the mega widget.

1999-12-10   Miguel de Icaza <miguel@helixcode.com>

	* e-table.c: New file, implements the mega widget.

1999-12-09  Miguel de Icaza  <miguel@gnu.org>

	* e-table-header.c (e_table_header_col_diff): fix this routine.

1999-12-04  Miguel de Icaza  <miguel@gnu.org>

	* e-table-header-item.c (ethi_event): Started drag and drop
	support. 

	* e-table-item.c (eti_table_model_changed): The columns are
	controled by the Header, not by the TableModel.

	* e-table-header-item.c (ethi_draw): Fixed redraw logic to support
	arbitrary header positioning.

	* e-cell.h: Revamped e-cell interface.  We now provide the model
	column and the view column to all methods (so that the methods can
	talk to the view and to the model at the same time).

	* e-table-item.c: Update to new API
	* e-cell-test.c: Update to new API

1999-12-03  Miguel de Icaza  <miguel@gnu.org>

	* e-cell.c (e_cell_class_init): Provide emtpy methods for
	enter_edit, and leave_edit.

	* e-table-item.c: Killed draw cell.
	(eti_draw): Perform column mapping here.
	(e_table_item_leave_edit): ditto.
	(e_table_item_enter_edit): ditto.
	(eti_event): ditto.

1999-12-02  Miguel de Icaza  <miguel@gnu.org>

	* e-table-header.c (e_table_header_index): fixed api.

1999-12-01  Miguel de Icaza  <miguel@gnu.org>

	* test-cols.c (multi_cols_test): Update to simplified API.
	* test-check.c (check_test): ditto
	* test-table.c (table_browser_test): ditto

	* e-table-simple.c (e_table_simple_class_init): Kill column_name method.

	* e-table-model.h: Kill column_name method.

	* e-table-col.c (e_table_col_new): Instead of using a column name,
	use a column index.

	* e-cell-text.c (ect_draw): Keep track of the originally allocated
	piece of code.

	* e-table-header-item.c (ethi_unrealize): Removed change cursor
	from here.

	* e-cell-text.c (ect_draw): Memory leak fix.

	* table-test.c (main): Enhance the demo to load sample.table
	automatically, to get memprof working.

	* e-table-header.c (eth_do_remove): Take an argument: do -remove.

	* e-table-header.c (e_table_header_add_column): Sink ETableCol to
	own the object.

	* e-table-col.h: Made ETableCol a GtkObject to make reference
	counting the lifecycle method for these objects.

	* e-table-col.c (e_table_col_destroy): New API call.

	* e-table-subset.c (e_table_subset_get_toplevel): New API call. 

1999-11-30  Miguel de Icaza  <miguel@gnu.org>

	* e-cell-checkbox.c (e_cell_checkbox_new): This one derives from
	e-cell-toggle.   

	* check-emtpy.xpm, check-filled.xpm: new files.

	* e-cell-toggle.c (etog_draw): Paint in white.
	If we have transparency enabled, do the nice alpha computation.
	
	* test-table.c, test-cols.c: new files;  They implement the split
	tests. 

1999-11-29  Miguel de Icaza  <miguel@gnu.org>

	* e-table-col.c (e_table_col_new): Set etc->resizeable.

	* e-table-header-item.c (ethi_event): Handle non-resizeables
	columns;  Add support for minimum width.

	* e-cell-toggle.c, e-cell-toggle.h: New file.  Implement a
	multi-state image toggle cell object.

	* e-cell-text.c (ect_leave_edit): Handle the case of us calling
	leave edit manually.
	(ect_stop_editing): Leave manually editing here.
	(ect_draw): Add one pixel to the border for left and right;
	Handle off-screen cursor (must be improved).
	(ect_edit_select_all): New function.
	(ect_event): Select all text on editing start

	* e-table-item.c (eti_event): Map mouse events and dispatch them.
	(eti_event): Add spreadsheet mode for editing; Enter editing only
	with visual characters;
	Leave editing mode when a different row has been selected.
	(eti_get_height): Fix the computation for this; Fix logic for the
	length_threshold.

	(eti_draw): Add borders on all sides of the box;   
	Only draw focus if the cell is not being edited.
	
1999-11-28  Miguel de Icaza  <miguel@gnu.org>

	* e-table-item.c (eti_draw): Focus inside, not outside.
	(eti_realize): Enhance our focus gc.

	* e-cell-text.c (ect_enter_edit, ect_leave_edit): New methods;
	They implement editing.

	* e-cell.h: new methods: enter_edit, leave_edit
	
	* e-table-model.h (set_value_at): make val argument const.

	* e-table-simple.c (simple_set_value_at): Make value argument const;

	* e-table-item.c (eti_set_arg): Add new mode: draw_focus;

1999-11-27  Miguel de Icaza  <miguel@gnu.org>

	* e-table-item.c (eti_event): beginning of the keyboard navigation.

	* e-table-model.c (e_table_model_row_changed): new function.
	(e_table_model_cell_changed): new function.
	(e_table_model_class_init): New signals.

	* e-table-item.c (eti_request_region_redraw): x2, y2 offsets were
	wrong. 
	(eti_select): Repaint selected region.
	(eti_request_region_redraw): Fix range.
	(eti_draw): Correct offset computation here. 
	(e_table_item_class_init): New method: row_selection, handles the
	selection.
	
	Now it implement GTK_SELECTION_SINGLE and GTK_SELECTION_MULTIPLE. 

	Focusing and selection should be correct now.
	
1999-11-26  Miguel de Icaza  <miguel@gnu.org>

	* e-table-item.c (eti_realize): Compute height using the ecell
	methods here. 
	(eti_get_height): new method to compute dimensions.

	* e-cursors.c: use a different cursor.

	* e-table-model.h: kill height and row_height methods.

	* e-cell.c (ec_height): New method.

	* e-cell-text.c (ect_realize): Load the font from the canvas.
	(ect_draw): New color setup.
	Center in the row.
	(ect_height): Implement new method.

1999-11-26  Michael Meeks  <mmeeks@gnu.org>

	* ROADMAP.e-table: small spelling/typo fixes.

1999-11-25  Miguel de Icaza  <miguel@gnu.org>

	* e-table-item.c (eti_event): Work on mouse-button event
	propagation to cells.

	* e-cell-text.c (ect_draw): Use CellViews now.

	* e-table-item.c (eti_realize_cell_views): New routine: Realizes
	the cell views
	(eti_unrealize_cell_views): New routine: unrealizes the cell views.

	* e-table-item.h: Move cell_views array here.

	* table-test.c (value_at): Fix return value.
	(main): use new invocation method.

	* e-table-header-item.c (ethi_realize): Realize cells.

	* e-table-item.c (eti_header_dim_changed): redraw before and after.

	* e-table-header-item.c (ethi_event): Add continuous resizing.

1999-11-24  Miguel de Icaza  <miguel@gnu.org>

	* e-table-subset.h, e-table-subset.c: New files, used to implement
	subset tables.

	* e-table-sorted.h, e-table-sorted.c: Now they derive from
	e-table-subset. 

	* e-cell.c, e-cell.h: realize method now return per view instance
	data. 
	
1999-11-20  Miguel de Icaza  <miguel@gnu.org>

	* e-table-item.c (eti_draw): WOOOOHOOOOOoO!  It took me quite a
	while to figure this one out.  Fixed.

	* e-table-header-item.c (ethi_set_arg): Compute width, keep track
	of it. 
	(ethi_add_table_header): Monitor changes to the Header model;
	Queue updates.
	(ethi_draw): Fix the redraw logic here.

	* table-test.c (main): Change the sample code, so we can better
	debug this.

	* e-table-item.c (eti_header_structure_changed): Keep track of
	width;  
	(eti_header_dim_changed): ditto.
	(eti_draw): Many redraw fixes.
	
1999-11-19  Miguel de Icaza  <miguel@gnu.org>

	* e-table-item.c (eti_realize): Hook up;  Load gcs.
	(eti_unrealize): Hook up.

	* e-table-sorted.c: Finished implementing.

1999-11-18  Miguel de Icaza  <miguel@gnu.org>

	* e-table-model.c (e_table_model_class_init): Add model_changed
	signal here.

	* e-table-item.c, e-table-item.h: New files.  They implement the
	view of the ETableModel as Canvas Items.
	
	* e-table-header-item.c (ethi_set_arg): Ref header here.
	(ethi_destroy): Unref it here.

1999-11-17  Ettore Perazzoli  <ettore@gnu.org>

	* e-msg-composer-address-dialog.c: Moved to `$(srcdir)/composer'.
	* e-msg-composer-address-dialog.h: Likewise.
	* e-msg-composer-address-entry.c: Likewise.
	* e-msg-composer-address-entry.h: Likewise.
	* e-msg-composer-attachment-bar.c: Likewise.
	* e-msg-composer-attachment-bar.h: Likewise.
	* e-msg-composer-attachment.c: Likewise.
	* e-msg-composer-attachment.h: Likewise.
	* e-msg-composer-hdrs.c: Likewise.
	* e-msg-composer-hdrs.h: Likewise.
	* e-msg-composer.c: Likewise.
	* e-msg-composer.h: Likewise.
	* e-msg-composer-address-dialog.glade: Likewise.
	* e-msg-composer-attachment.glade: Likewise.
	* e-msg-composer.glade: Likewise.
	* Makefile.am: Updated accordingly.

Nov 14 1999 Elliot Lee
	* Makefile.am: It's libevolutionwidgets.la, not .a

1999-11-14  Miguel de Icaza  <miguel@gnu.org>

	* e-table-header-item.c (is_pointer_on_division): Add resizing
	capabilities. 

	* e-table-sorted.c: Finish implementation.

1999-11-13  Miguel de Icaza  <miguel@gnu.org>

	* e-table-sorted.c: Implement e-table-sorted object.

1999-11-12  Miguel de Icaza  <miguel@gnu.org>

	* e-table-header-item.c: Make the thing configurable.

	* e-table-header-item.h: Add font field, location, height.

1999-11-12  Ettore Perazzoli  <ettore@gnu.org>

	* e-msg-composer-hdrs.c: New member `tooltips' in `struct
	_EMsgComposerHdrsPrivate'.
	(init): Initialize it.
	(destroy): New function.
	(class_init): Install it as the `destroy' GtkObject method.
	(add_header): New parameters `tip', `tip_private'.  Setup a
	tooltip for the entry with them.
	(setup_headers): Updated accordingly.

1999-11-11  Miguel de Icaza  <miguel@gnu.org>

	* e-table-header.c (e_table_header_add_column): Update offsets. 
	(eth_update_offsets): New routine.

	* e-table-col.h, e-table-col.c: New files.

	* e-table-header.h (e_table_header_get_selected_indexes):
	Pretify.

	* table-test.c (main): New file;  used for testing ETable package.

	* e-table-simple.h: Fix type.

1999-11-12  Ettore Perazzoli  <ettore@gnu.org>

	* e-msg-composer-address-dialog.glade: Cosmetical changes.

	* e-msg-composer-attachment-bar.c (size_to_string): New helper
	function.
	(update): Put the size in the icon's label using this function.
	(ICON_SEPARATORS): Remove '.' to avoid wrapping of the size string
	on the decimal dot.  But gnome-libs is broken and this has no real
	effect!  :-(
	(e_msg_composer_attachment_bar_new): No longer make text editable.
	Use the `GTK_SELECTION_MULTIPLE' selection mode.
	(remove_selected): No longer assume only one attachment is
	selected.

	* e-msg-composer-attachment.c: #include <sys/stat.h>
	(init): Initialize all the members.
	(e_msg_composer_attachment_new): Set size using `stat()'.

	* e-msg-composer-attachment.h: New member `size' in `struct
	_EMsgComposerAttachment'.

	* e-msg-composer.c (setup_signals): Connect `address_dialog_cb' to
	the "show_address_dialog" signal of the header widget.

	* e-msg-composer-hdrs.c (add_address_header): Renamed to
	`add_header'.  New parameter `addrbook_button': if true, use a
	button instead of a label and make it trigger an
	"show_address_dialog" signal.
	(address_button_clicked_cb): Signal handler to handle this on a
	"clicked" signal from the button.
	(setup_headers): Updated accordingly.  Also, make "Subject" the
	last item.  (This makes it look more like Outlook and friends.)

	* e-msg-composer-hdrs.c: New signal "show_address_dialog".
	* e-msg-composer-hdrs.h: Updated accordingly.

	* e-msg-composer-hdrs.c (add_address_header): Reduce padding
	considerably.

	* e-msg-composer.c (e_msg_composer_construct): Do not use any
	padding in the main vbox.

	* Makefile.am: Moved the `e-table*' sources to `EXTRA_DIST'.
	Compile as a shared library.

1999-11-08  Ettore Perazzoli  <ettore@gnu.org>

	* e-msg-composer-address-dialog.c: Implemented cut & paste for the
	recipient lists.
	(init): Initialize `cut_buffer'.
	(destroy): Free it.
	(recipient_clist_selection_get_cb): New function.
	(recipient_clist_selection_received_cb): New function.
	(recipient_clist_selection_clear_event_cb): New function.
	(setup_recipient_list_signals): Install them as signal handlers
	for "selection_get", "selection_received" and
	"selection_clear_event" respectively.
	(copy_recipient_cb): New function implementing the "copy"
	operation.
	(cut_recipient_cb): New function implementing the "cut" operation.
	(paste_recipient_cb): New function implementing the "paste"
	operation.

	* e-msg-composer-address-dialog.h: New member `cut_buffer' in
	`struct _EMsgComposerAddressDialog'.

1999-11-07  Ettore Perazzoli  <ettore@gnu.org>

	* e-msg-composer-address-dialog.c: New context menu
	`recipient_list_popup_info' for the recipient CLists.
	(recipient_clist_button_press_cb): New function.
	(setup_signals): Install it as the "button_press_event" signal
	handler for popping up the CList context menu.

	* e-msg-composer.c (free_string_list): New helper function.
	(setup_address_dialog): Setup the initial values in the address
	dialog according to the ones in the header widget.

	* e-msg-composer-hdrs.c (e_msg_composer_hdrs_get_to): New function.
	(e_msg_composer_hdrs_get_cc): New function.
	(e_msg_composer_hdrs_get_bcc): New function.

	* e-msg-composer.c (setup_address_dialog): New helper function.
	(address_dialog_cb): Use it.

	* e-msg-composer-address-dialog.c (add_address): Do not set the
	row data anymore.  Instead, put the full address description
	(i.e. complete with the email address, not just the full name) in
	the CList.
	(add_address): Do nothing if no item is selected in the address
	CList.
	(get_list): Get the address list from the CList without passing
	through the address CList.
	(set_list): New helper function.
	(e_msg_composer_address_dialog_set_to_list): New function.
	(e_msg_composer_address_dialog_set_cc_list): New function.
	(e_msg_composer_address_dialog_set_bcc_list): New function.

	* e-msg-composer.c (address_dialog_apply_cb): Apply values from
	the address dialog into the composer.

	* e-msg-composer-hdrs.c (e_msg_composer_hdrs_set_to): New function.
	(e_msg_composer_hdrs_set_cc): New function.
	(e_msg_composer_hdrs_set_bcc): New function.

	* e-msg-composer-address-entry.c
	(e_msg_composer_address_entry_set_list): New function.

	* e-msg-composer-address-dialog.c (apply): New helper function.
	(clicked): New function, `clicked' method for the `GnomeDialog'
	class.
	(class_init): Install it.

1999-11-06  Ettore Perazzoli  <ettore@gnu.org>

	* e-msg-composer-attachment-bar.c (destroy): Call the destroy
	method of the parent class.

	* e-msg-composer.c: #include "e-msg-composer-address-dialog.h".
	(address_dialog_cb): New callback to start the address dialog.
	(setup_signals): Connect it to the appropriate button/menu item.
	(init): Initialize the new `address_dialog' member to NULL.
	(destroy): Destroy the `address_dialog' if not NULL.

	* e-msg-composer.h: New member `address_dialog' in `struct
	_EMsgComposer'.

	* e-msg-composer.glade: Added button to activate the address
	composition dialog.

	* e-msg-composer-address-dialog.h, e-msg-composer-address-dialog.c:
	New files implementing the address composition dialog for Evolution.

	* e-msg-composer-address-dialog.glade: New file.

	* e-msg-composer-attachment.c: `signals' made static.

1999-11-05  Ettore Perazzoli  <ettore@gnu.org>

	* Makefile.am: Compile the new files in a `libevolutionwidgets'
	library.
	(CPPFLAGS): #define `E_GUIDIR'.

	* e-msg-composer.c, e-msg-composer.h: New files implementing an
	initial version of the Evolution message composer widget.

	* e-msg-composer-address-entry.c, e-msg-composer-address-entry.h:
	New files implementing a GtkEntry customized for entering email
	address lists.

	* e-msg-composer-attachment-bar.c, e-msg-composer-attachment-bar.h:
	New files implementing a widget for editing mail attachments.

	* e-msg-composer-attachment.c, e-msg-composer-attachment.h: New
	files implementing file attachment objects for the message
	composer.

	* e-msg-composer-hdrs.c, e-msg-composer-hdrs.h: New files
	implementing a widget for editing of email message headers.

	* e-msg-composer-attachment.glade: New file.
	* e-msg-composer.glade: New file.

1999-10-31  Miguel de Icaza  <miguel@gnu.org>

	* widgets/e-table-column.c, e-table-column.h: New file, implements the
	e-table-column object.

	* widget/e-table-model.h, e-table-model.c, e-table-simple.c,
	e-table-simple.h: New files.  Implements the column model and
	a simple table wrapper.

