SUBDIRS	= select-names

INCLUDES =							\
	-DG_LOG_DOMAIN=\"evolution-addressbook\"		\
	$(EXTRA_GNOME_CFLAGS)					\
	$(GNOME_INCLUDEDIR)					\
	-I$(top_srcdir)						\
	-I$(top_builddir)					\
	-I$(top_srcdir)/shell					\
	-I$(top_builddir)/shell					\
	-I$(top_srcdir)/widgets/misc				\
	-I$(top_srcdir)/addressbook/gui/contact-editor		\
	-I$(top_srcdir)/addressbook/gui/contact-list-editor	\
	-I$(top_srcdir)/addressbook/gui/minicard		\
	-I$(top_srcdir)/addressbook/gui/widgets			\
	-I$(top_srcdir)/addressbook/backend			\
	-I$(top_builddir)/addressbook/backend			\
	$(BONOBO_HTML_GNOME_CFLAGS)				\
	$(GNOME_VFS_CFLAGS)					\
	-DEVOLUTION_DATADIR=\""$(datadir)"\"			\
	-DEVOLUTION_GLADEDIR=\""$(gladedir)"\"			\
	-DEVOLUTION_ICONSDIR=\""$(iconsdir)"\"			\
	-DEVOLUTION_LOCALEDIR=\""$(localedir)"\"		\
	-DCAMEL_PROVIDERDIR=\""$(providerdir)"\"		\
	-DEVOLUTION_IMAGESDIR=\""$(datadir)"/images/evolution\"


bin_PROGRAMS =	\
	evolution-addressbook

evolution_addressbook_SOURCES = 	\
	addressbook-component.c		\
	addressbook-component.h		\
	addressbook-config.c		\
	addressbook-config.h		\
	addressbook-factory.c		\
	addressbook-storage.c		\
	addressbook-storage.h		\
	addressbook.c			\
	addressbook.h			\
	e-cardlist-model.c		\
	e-cardlist-model.h		\
	e-address-widget.h		\
	e-address-widget.c		\
	e-address-popup.h		\
	e-address-popup.c

evolution_addressbook_LDADD =						\
	select-names/libeselectnames.la					\
	$(top_builddir)/shell/libeshell.la				\
	$(EXTRA_GNOME_LIBS)						\
	$(BONOBO_HTML_GNOME_LIBS)					\
	$(GNOME_VFS_LIBS)						\
	$(BONOBO_CONF_LIBS)						\
	$(top_builddir)/addressbook/gui/widgets/libeminicard.a		\
	$(top_builddir)/addressbook/backend/ebook/libebook.la		\
	$(top_builddir)/camel/libcamel.la				\
	$(top_builddir)/libibex/libibex.la				\
	$(top_builddir)/e-util/ename/libename.la			\
	$(top_builddir)/addressbook/gui/contact-list-editor/libecontactlisteditor.a	\
	$(top_builddir)/addressbook/gui/contact-editor/libecontacteditor.a	\
	$(top_builddir)/libversit/libversit.la				\
	$(top_builddir)/widgets/misc/libemiscwidgets.a 			\
	$(top_builddir)/addressbook/printing/libecontactprint.a		\
	$(top_builddir)/addressbook/gui/search/libeaddressbooksearch.a	\
	$(top_builddir)/addressbook/gui/merging/libecardmerging.a	\
	$(top_builddir)/filter/libfilter.la				\
	$(top_builddir)/e-util/libeutil.la				\
	$(top_builddir)/widgets/menus/libmenus.la

evolution_addressbook_LDFLAGS = `gnome-config --libs gdk_pixbuf` -export-dynamic

@XML_I18N_MERGE_OAF_RULE@

oafdir = $(datadir)/oaf
oaf_in_files = GNOME_Evolution_Addressbook.oaf.in
oaf_DATA = $(oaf_in_files:.oaf.in=.oaf)

gladedir   = $(datadir)/evolution/glade
glade_DATA = addressbook-config.glade

EXTRA_DIST = 			\
	$(glade_DATA)		\
	$(oaf_DATA)		\
	addressbook-config.glade\
	$(oaf_in_files)

if ENABLE_PURIFY
PLINK = $(LIBTOOL) --mode=link $(PURIFY) $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(LDFLAGS) -o $@

all-local: evolution-addressbook.pure

evolution-addressbook.pure: evolution-addressbook
	@rm -f evolution-addressbook.pure
	$(PLINK) $(evolution_addressbook_LDFLAGS) $(evolution_addressbook_OBJECTS) $(evolution_addressbook_LDADD) $(LIBS)

endif
