2003-09-29  Chris Toshok  <toshok@ximian.com>

	* gui/component/select-names/e-select-names.c
	(addressbook_model_set_uri): e_addressbook_model -> eab_model.
	(contact_key): e-contactify this, and remove the call to
	e_contact_get_book since we don't have it.
	(sync_one_model): card -> contact.
	(real_add_address_cb): track various name changes.
	(esn_get_key_fn): same.
	(e_addressbook_create_ebook_table): same.
	(folder_selected): same.
	(select_entry_changed): same.
	(e_select_names_new): same.

	* gui/component/select-names/e-select-names-text-model.c
	(dump_model): s/card/contact.
	(e_select_names_text_model_insert_length): e-destination ->
	eab-destination.
	(e_select_names_text_model_delete): same.
	(e_select_names_text_model_obj_count): same.
	(nth_obj_index): same.
	(e_select_names_text_model_activate_obj): ifdef this out since we
	don't have e_contact_get_book in the new api.

	* gui/component/select-names/e-select-names-table-model.c
	(fill_in_info): convert to e_contact/eab_destination.

	* gui/component/select-names/e-select-names-popup.c
	(change_email_num_cb): e_destination -> eab_destination.
	(populate_popup_contact): same, and ECard -> EContact.  Also, the
	email attribute is a GList, not an EList.  lastly, rename from
	populate_popup_card.
	(populate_popup_nocontact): same, and rename from
	populate_popup_nocard.
	(e_select_names_populate_popup): same.

	* gui/component/select-names/e-select-names-model.h: track changes
	to e_destination, and rename the cardify methods to something mode
	descriptive.

	* gui/component/select-names/e-select-names-model.c
	(e_select_names_model_duplicate): e_destination ->
	eab_destination.
	(e_select_names_model_get_textification): same.
	(e_select_names_model_get_address_text): same.
	(e_select_names_model_get_destination): same.
	(e_select_names_model_export_destinationv): same.
	(send_changed): same.
	(e_select_names_model_import_destinationv): same.
	(e_select_names_model_get_contact): same, and rename from
	_get_card
	(e_select_names_model_get_string): same.
	(connect_destination): same.
	(disconnect_destination): same.
	(e_select_names_model_contains): same.
	(e_select_names_model_insert): same.
	(e_select_names_model_append): same.
	(e_select_names_model_replace): same.
	(e_select_names_model_delete): same.
	(e_select_names_model_clean): same.
	(delete_all_iter): same.
	(e_select_names_model_overwrite_copy): same.
	(e_select_names_model_merge): same.
	(e_select_names_model_name_pos): same.
	(e_select_names_model_text_pos): same.
	(e_select_names_model_cardify): nuke.
	(e_select_names_model_uncardify): nuke.
	(e_select_names_model_cancel_cardify): nuke.
	(e_select_names_model_load_all_contacts): rename _cardify_all to
	this.
	(e_select_names_model_cancel_all_contact_load): rename
	_cancel_cardify to this.

	* gui/component/select-names/e-select-names-manager.c
	(focus_in_cb): cancel_cardify_all -> cancel_all_contact_load
	(focus_out_cb): cardify_all -> load_all_contacts.
	(completion_popup_cb): same.
	(load_completion_books): no e_book_expand_uri anymore.
	(e_select_names_manager_new): e_book_get_config_database ->
	eab_get_config_database.
	(e_select_names_manager_dispose): same.

	* gui/component/select-names/e-select-names-completion.h: e-book.h
	-> e-book-async.h

	* gui/component/select-names/e-select-names-completion.c:
	EContactify this.

	* gui/component/select-names/e-select-names-bonobo.c
	(entry_get_property_fn): ifdef out the SIMPLE_CARD_LIST getter,
	and cardify_all -> load_all_contacts.

	* gui/component/select-names/Evolution-Addressbook-SelectNames.idl:
	nuke all the SimpleCard stuff.  It's a horribly inefficient way to
	deal with vcards, and since ebook is platform level now, we can
	(and should) promote just linking to ebook to do this.

2003-09-19  Gilbert Fang  <gilbert.fang@sun.com>

       * addressbook/gui/component/addressbook-component.c (xfer_folder):
         remove the "addressbook.db.summary" correctly. #48538

2003-09-18  Chris Toshok  <toshok@ximian.com>

	* backend/ebook/e-book.c (e_book_get_self): new function, ifdefed
	out.
	(e_book_set_self): new function, empty.
	(e_book_get_default_addressbook): new function, empty.
	(e_book_get_addressbooks): same.
	
	* backend/ebook/e-book.h: add prototypes for e_book_get_self,
	e_book_set_self, e_book_get_default_addressbook, and
	e_book_get_addressbooks.

2003-09-17  Chris Toshok  <toshok@ximian.com>

	* gui/component/addressbook.c (addressbook_new_control): don't use
	a GtkFrame.

	* gui/widgets/eab-contact-display.c (on_url_requested): just use
	EABContactDisplay* instead of passing a gpointer.
	(on_link_clicked): new function, just call gnome_url_show for now.
	(render_address): convert \n's to <br>'s in the case of address
	labels, and stop using <pre>...</pre>.  also, _() strings.
	(eab_contact_display_render): _() strings.
	(eab_contact_display_new): un-ifdef the link_clicked signal.

2003-09-17  Chris Toshok  <toshok@ximian.com>

	* backend/pas/ximian-vcard.h (XIMIAN_VCARD): quiet the compiler
	warnings, and make the URL look like a real url, using http://..

	* backend/pas/pas-backend-card-sexp.c (compare_email): reimplement
	this in terms of EContact.
	(compare_category): same.
	(compare_arbitrary): nuke, since we don't do arbitrary data the
	same way anymore.
	(prop_info_table): enable mailer, spouse, and note.

	* backend/ebook/e-vcard.h (EVC_MAILER): add
	(EVC_CATEGORIES): add.

	* backend/ebook/e-contact.c (field_info): add E_CONTACT_SPOUSE,
	NOTE, MAILER, and some ifdefed CATEGORIES support.

	* backend/ebook/e-contact.h: same.

	* backend/ebook/e-book-query.c (e_book_query_to_string): quiet
	compiler warning.

2003-09-05  Dan Winship  <danw@ximian.com>

	* gui/component/select-names/Makefile.am: Make libeselectnames.la
	be noinst: it depends on a symbol in libevolution-addressbook
	(addressbook_load_uri), so it's not usable as a standalone library
	anyway.

2003-09-04  Dan Winship  <danw@ximian.com>

	* conduit/Makefile.am (libeaddress_conduit_la_LIBADD):
	s/libeconduit-static/libeconduit/

2003-08-26  JP Rosevear  <jpr@ximian.com>

	* conduit/address-conduit.c (ecard_from_remote_record): duplicate
	the extra address lines

2003-08-18  Gilbert Fang  <gilbert.fang@sun.com>

        * addressbook/gui/widgets/e-addressbook-util.c
        (e_addressbook_send_card_list): use memcpy to assign
        CORBA_char_sequence instead of strcpy. (#46706)

2003-08-12  Rodrigo Moya <rodrigo@ximian.com>

	* backend/ebook/e-book.c (e_book_dispose): unref the
	EComponentListener before unloading the CORBA object.

2003-08-12  Hans Petter Jansson  <hpj@ximian.com>

	* backend/ebook/e-destination.c (e_destination_dispose): Chain.

	* gui/component/e-address-widget.c (e_address_widget_destroy): Chain.
	Prevent double frees. Prevent double GSource removal.

	* gui/component/e-cardlist-model.c (e_cardlist_model_class_init):
	Store parent class.
	(e_cardlist_model_dispose): Chain. Prevent double frees and unrefs.

	* gui/contact-editor/e-contact-editor-address.c
	(e_contact_editor_address_dispose): Chain.

	* gui/contact-editor/e-contact-editor-fullname.c
	(e_contact_editor_fullname_dispose): Chain.

	* gui/contact-list-editor/e-contact-list-editor.c
	(e_contact_list_editor_dispose): Chain.

	* gui/contact-list-editor/e-contact-list-model.c
	(contact_list_model_destroy): Chain. Prevent double frees and unrefs.

	* gui/widgets/e-addressbook-reflow-adapter.c (addressbook_dispose):
	Chain.

	* gui/widgets/e-addressbook-table-adapter.c (addressbook_dispose):
	Chain.

	* gui/widgets/e-addressbook-treeview-adapter.c (addressbook_destroy):
	Chain. Prevent double free.

	* gui/widgets/gal-view-minicard.c (gal_view_minicard_dispose):
	Chain. Prevent double free and detach.

	* gui/widgts/gal-view-treeview.c (gal_view_treeview_dispose):
	Chain. Prevent double free and detach.

	* printins/e-contact-print-style-editor.c
	(e_contact_print_stule_editor_destroy): Chain. Prevent double unref.

2003-07-23  Chris Toshok  <toshok@ximian.com>

	* printing/e-contact-print.c (e_contact_print_response): deal with
	"uses_list".  Fixes #30839.
	(e_contact_print_dialog_new): use GINT_TO_POINTER instead of
	casting to void*, and set "uses_list" to FALSE.
	(e_contact_print_card_dialog_new): same.
	(e_contact_print_card_list_dialog_new): same, but set "uses_list"
	to TRUE.

2003-07-23  Chris Toshok  <toshok@ximian.com>

	* backend/ebook/e-book.c (e_book_dispose): fix a typo.

2003-07-22  Akira TAGOH  <tagoh@redhat.com>

	* printing/e-contact-print-envelope.c (ecpe_print): Use 'Sans'
	instead of 'Helvetica' for the font name.
	* printing/e-contact-print.c (e_contact_build_style): Likewise.

2003-06-30  Dan Winship  <danw@ximian.com>

	* gui/widgets/e-addressbook-view.c (e_addressbook_view_dispose):
	disconnect from model signals to prevent a race condition at
	shutdown where the view gets destroyed and then the model notices
	the backend dying before being destroyed itself.

	* gui/widgets/e-addressbook-reflow-adapter.c
	(addressbook_finalize): add, to free priv.
	(e_addressbook_reflow_adapter_class_init): set it up

	* gui/component/e-address-popup.c (e_address_popup_set_free_form):
	Don't leak strings

	* gui/component/addressbook-storage.c (load_source_data): don't
	leak xml data.

	* gui/component/addressbook-component.c (new_item_cb): don't leak
	the new card.

2003-06-25  Gilbert Fang <gilbert.fang@sun.com>

	* gui/widgets/e-minicard-view-widget.c 
	(e_minicard_view_widget_real_focus_in_event): new function, 
	override the event handler for focus_in_event, set the first item
	be focused if no focused item at all.  Fixes bug 41826.

2003-06-18  Chris Toshok  <toshok@ximian.com>

	* gui/contact-editor/e-contact-editor.c (fill_in_field): in the
	EUrlEntry case just reassign widget.  it'll be handled by the
	GtkEditable code below.  Fixes #43841.

2003-06-14  Larry Ewing  <lewing@ximian.com>

        * gui/backend/ebook/e-card-simple.c:
	* gui/backend/ebook/e-card.c:
	* gui/backend/ebook/evolution-ldif-importer.c:
	* gui/backend/ebook/load-pine-addressbook.c:
	* gui/backend/ebook/test-card.c:
	* gui/backend/pas/pas-backend-card-sexp.c:
	* gui/backend/pas/pas-backend-ldap.c: Fix lots of leaks, update
	for correct use of g_object_get. Some cleanups.

2003-06-13  Larry Ewing  <lewing@ximian.com>
	
	* gui/component/addressbook.c:
        * gui/component/e-cardlist-model.c:
	* gui/component/select-names/e-select-names-text-model.c:
	* gui/contact-editor/e-contact-editor.c:
	* gui/contact-editor/e-contact-save-as.c:
	* gui/contact-list-editor/e-contact-list-editor.c:
	* gui/widgets/e-addressbook-table-adapter.c:
	* gui/widgets/e-addressbook-util.c:
	* gui/widgets/e-addressbook-view.c:
	* gui/widgets/e-minicard-view.c:
	* gui/widgets/e-minicard.c:  Fix lots of leaks, update for correct
	use of g_object_get.  Some misc cleanups.

	* printing/e-contact-print.c: update for correct use of
	g_object_get.

2003-06-05  Not Zed  <NotZed@Ximian.com>

	** For #42691.

	* gui/component/select-names/Makefile.am (%.server.in): implicit
	rule for .in file.
	(BUILT_SOURCES): added server_DATA.

	* gui/component/Makefile.am (%.server.in): use implicit rule for
	.in file.
	(BUILT_SOURCES): added, just server_DATA.
	(CLEANFILES): added

	* backend/ebook/Makefile.am (BUILT_SOURCES): add server_DATA.

2003-06-04  Rodrigo Moya <rodrigo@ximian.com>

 	* backend/ebook/ebook.c (e_book_do_response_open): adapted to
 	changes in EComponentListener API.

** See ChangeLog.pre-1-4 for older changes

